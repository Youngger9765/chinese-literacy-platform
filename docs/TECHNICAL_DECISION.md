# 技術決策分析

> 為新平台選擇技術方案 - 不延續 Base44

---

## 📊 決策背景

**關鍵決定**：❌ 不延續 Base44 平台

**原因**：
- Base44 為 No-code 平台，需持續付費才能使用
- 「朗朗上口」因停止付費，平台已禁用（後端功能已完成但無法存取）
- 長期依賴 No-code 平台風險高（綁定、漲價、服務終止）
- 無法完全掌控核心技術與資料

---

## 🔄 三平台演進對比

### 對比表

| 面向 | 朗朗上口 | Duotopia | 新國語文平台 |
|------|---------|----------|-------------|
| **開發時期** | 1.5 年前 | 3 個月前（目前運作中）| 待開發 |
| **語言** | 繁體中文 | 英文 | 繁體中文 |
| **技術平台** | Base44 (No-code) | 自主開發 | **待決定** |
| **語音技術** | [待確認] | Azure Speech SDK | **Azure Speech SDK (zh-TW)** |
| **架構** | 校、班、生、師、課 | 校、班、生、師、課 | **校、班、生、師、課** |
| **狀態** | ⚠️ 已停用（未付費）| ✅ 運作中 | 🚧 規劃中 |
| **後端完成度** | ✅ 100%（已完成但無法存取）| ✅ 100% | 0% |
| **金流** | ❌ 未實作 | ✅ 已實作 | **可繼承** |
| **合規機制** | ❌ 未實作 | ✅ 已實作 | **可繼承** |
| **教學驗證** | ✅ 曾教授認可 | ✅ 實際商用 | 待驗證 |
| **程式碼掌控** | ❌ Base44 專屬 | ✅ 完全自主 | **✅ 完全自主** |
| **維護成本** | 💰 Base44 訂閱費 | 💰 雲端費用 | **💰 雲端費用** |

### 核心洞察

#### 1. 朗朗上口（Base44 平台）

**✅ 成功之處**：
- 驗證了「校、班、生、師、課」架構的可行性
- 獲得曾教授肯定，證明教學理念正確
- 即時回饋系統設計優秀（六階段回饋流程）
- 後端 API 與資料處理邏輯**已完成**

**❌ 限制**：
- 依賴 Base44 平台，停止付費後無法使用
- 已完成的程式碼與資料被鎖在 Base44 內
- 無法將成果遷移到其他平台
- 長期成本與控制權問題

**📸 狀態說明**：
> 後端功能**已全部完成**，包含錄音上傳、語音分析、資料處理邏輯。但因 Base44 平台需付費才能使用，目前已停止訂閱，導致平台禁用。所有已完成的功能與資料仍存在於 Base44 系統內，只是無法存取。

#### 2. Duotopia（自主開發平台）

**✅ 成功之處**：
- 從「朗朗上口」萃取「校、班、生、師、課」抽象概念
- 3 個月完成（包含金流、合規、權限管理）
- 使用 Azure Speech SDK（支援 147 種語言）
- 完全自主程式碼，不受平台限制
- 已實際商業運作

**核心價值**：
- 證明「校、班、生、師、課」架構可在 3 個月內實作
- 金流與合規問題已解決（教育產品必備）
- Azure Speech SDK 可輕鬆切換語言（en → zh-TW）

#### 3. 新國語文平台（方案選擇中）

**可繼承資源**：
- ✅ 朗朗上口的教學理念與功能設計
- ✅ Duotopia 的完整程式碼與架構
- ✅ Azure Speech SDK 的多語言能力
- ✅ 金流與合規機制

**需要開發**：
- 🆕 國語文專屬學習模組（生字學習、注音符號、筆順）
- 🆕 朗讀流暢度分析邏輯（參考朗朗上口設計）
- 🆕 蘇格拉底對話系統（LLM 驅動）
- 🆕 繁體中文 UI/UX 調整

---

## 🎯 三大方案比較

### 方案一（NEW - 推薦）：基於 Duotopia 架構改造

> **重要發現**：Young 已完成一個英文學習平台 [Duotopia](https://duotopia.co/)，採用「校、班、生、師、課」架構（從「朗朗上口」萃取），使用 Azure Speech SDK，包含金流與合規功能，開發時間僅 3 個月。

**核心策略**：
- ✅ 複用 Duotopia 的「校、班、生、師、課」架構（已驗證可行）
- ✅ 將 Azure Speech SDK 從英文切換到繁體中文（zh-TW）
- ✅ 保留金流、合規、權限管理等基礎建設
- 🆕 開發國語文專屬學習模組（生字學習、蘇格拉底對話、朗讀分析）

**Azure Speech SDK 繁體中文支援**：
- ✅ **語音識別（STT）**：支援 zh-TW（台灣國語）
- ✅ **文字轉語音（TTS）**：支援 Chinese (Taiwanese Mandarin)
- ✅ **多種聲音選項**：包含 zh-TW 的多個神經網路語音
- ✅ **持續更新**：2024-2026 年陸續新增中文語音與方言支援

**開發時程**：
- 📅 **Phase 1（1-2 個月）**：Duotopia 架構改造
  - Fork Duotopia 程式碼
  - 移除英文學習模組
  - 將 Azure Speech SDK 語言參數改為 zh-TW
  - 調整 UI 文字為國語文情境
  - 測試繁體中文語音識別準確度

- 📅 **Phase 2（3-4 個月）**：國語文學習模組開發
  - 朗讀流暢度分析（參考「朗朗上口」邏輯）
  - 即時回饋系統（六階段）
  - 生字學習模組（字型、字音、字義、筆順）
  - 蘇格拉底對話系統（LLM 驅動）

**總時程：4-6 個月（比全新開發快 50%）**

**優勢**：
- 🚀 **開發速度最快**：核心架構已完成，只需客製化
- 💰 **成本最低**：重用既有程式碼，減少重複開發
- ✅ **已驗證可行**：Duotopia 已在英文教學領域實際運作
- 🔒 **金流與合規**：已解決付費、隱私、資料保護等問題
- 👥 **學生可專注學習模組**：不用浪費時間在基礎架構
- 📊 **相同教學理念**：同樣源自「朗朗上口」的「校、班、生、師、課」概念

**挑戰**：
- ⚠️ 需驗證 Azure Speech SDK 中文識別準確度（早期測試必要）
- 🔧 需確認 Duotopia 程式碼是否可商業授權（若 Young 擁有所有權則無問題）
- 📝 需將英文教學邏輯抽象化為通用教學框架

---

### 方案二：繼承「朗朗上口」概念 + 全新開發

**保留內容**：
- ✅ 校、班、師、生、課的多層級架構
- ✅ 朗讀流暢度分析核心邏輯
- ✅ 即時回饋系統設計理念
- ✅ 教師管理後台 UI/UX 設計參考

**全新開發**：
- 🆕 使用現代技術棧（Next.js + FastAPI/Express）
- 🆕 完全自主的程式碼掌控權
- 🆕 可擴展的 AI 功能整合
- 🆕 優化的資料庫設計

**優勢**：
- 🚀 有參考原型，減少設計迭代時間
- 📊 已驗證的教學理論與功能可行性
- 👥 曾教授認可的架構，降低教學方向風險
- ⚡ 技術債務從零開始，乾淨的程式碼基礎

**挑戰**：
- ⏱️ 開發時間較長（預估 6-9 個月 MVP）
- 💰 初期成本較高
- 🧪 需要重新測試所有功能

---

### 方案三：全新概念 + 全新開發

**完全重構**：
- 🔄 重新設計架構層級
- 🔄 重新定義功能流程
- 🔄 重新設計 UI/UX
- 🔄 重新規劃 AI 整合方式

**優勢**：
- 💡 不受既有框架限制，創新空間最大
- 🎯 可針對新需求最佳化設計
- 🆕 採用最新教學研究成果

**挑戰**：
- ⏱️ 開發時間最長（預估 9-12 個月 MVP）
- 💰 成本最高
- ⚠️ 教學理論驗證風險高
- 🔬 需要更多前期研究與驗證

---

## 💡 建議方案

### ✅ 強烈推薦：**方案一（基於 Duotopia 架構改造）**

**理由**：

#### 1. 速度優勢（最關鍵）
- 🚀 Duotopia 用 3 個月完成（包含金流、合規）
- 🚀 改造為國語文平台：1-2 個月完成核心架構
- 🚀 學習模組開發：3-4 個月
- 🚀 **總時程：4-6 個月**（vs 方案二的 6-9 個月）

#### 2. 成本優勢
- 💰 重用程式碼，減少 40-50% 開發時間
- 💰 金流、合規、權限管理已完成（這些很花時間）
- 💰 啟翔、張靖杭可專注在教學價值高的模組
- 💰 預估節省成本：$150,000-200,000

#### 3. 風險最低
- ✅ Duotopia 已實際運作，架構穩定
- ✅ Azure Speech SDK 完整支援繁體中文（zh-TW）
- ✅ 「校、班、生、師、課」概念已獲曾教授認可（來自朗朗上口）
- ✅ Young 熟悉整個程式碼庫，降低技術債風險

#### 4. 技術優勢
- 🔧 Azure Speech SDK 完整支援繁體中文
  - STT（語音轉文字）：zh-TW
  - TTS（文字轉語音）：Chinese (Taiwanese Mandarin)
  - 147 種語言支援（未來可擴展閩南語、客語）
- 🔧 金流整合已完成（可直接收費）
- 🔧 合規機制已建立（隱私、資料保護）

#### 5. 商業考量
- 📊 啟翔、張靖杭每週 16-20 小時
- 📊 1-2 個月改造 Duotopia 核心（Young 指導）
- 📊 3-4 個月開發學習模組（學生獨立作業）
- 📊 可在 2026 年 Q2 進入測試階段（vs 方案二的 Q3）

#### 6. 長期擴展性
- 🌍 Duotopia 已支援多語言架構
- 🌍 未來可輕鬆擴展到閩南語、客語、英語
- 🌍 相同平台可服務不同語言學習需求

---

## 🏗️ 建議技術棧

### 前端技術

#### 學生端（跨平台優先）
```
Flutter (建議)
- iOS / Android / Web 三平台
- 已有「朗朗上口」開發經驗可參考
- 手寫辨識支援良好
- 離線功能支援
```

**替代方案**：
```
React Native + Expo
- JavaScript 生態系更豐富
- 開發速度較快
- 但效能略遜於 Flutter
```

#### 教師端（Web）
```
Next.js 14 + TypeScript (強烈建議)
- React Server Components
- 快速開發儀表板
- SEO 友善（若需公開頁面）
- Vercel 部署簡單
```

### 後端技術

```
選項 A：Python FastAPI (建議)
- AI/ML 整合友善
- 語音處理函式庫豐富
- 曾老師團隊可能有 Python 研究工具可整合
- 非同步支援

選項 B：Node.js + Express/NestJS
- 與前端同語言（TypeScript）
- 開發團隊技能一致性高
- 生態系成熟
```

### 資料庫

```
主資料庫：PostgreSQL
- 開源、成熟、可靠
- 支援複雜查詢（學習分析報告）
- JSON 欄位支援（靈活的學習紀錄）

快取層：Redis
- 降低語音處理 API 成本
- 加速常用查詢

檔案儲存：AWS S3 / Cloudflare R2
- 錄音檔案儲存
- CDN 加速播放
```

### AI 與語音服務

| 功能 | 建議方案 | 備選方案 |
|------|---------|---------|
| **語音識別 (STT)** | Google Speech-to-Text (中文支援佳) | Azure Speech (若需多語言) |
| **文字轉語音 (TTS)** | Google TTS | Azure TTS |
| **蘇格拉底對話** | OpenAI GPT-4o / Claude 3.5 Sonnet | Google Gemini Pro |
| **手寫辨識** | Google ML Kit | Apple PencilKit (iOS) |
| **朗讀分析** | 自建演算法 + Google STT | 可參考「朗朗上口」邏輯 |

---

## 📅 開發時程規劃

### Phase 0：準備階段（2-3 週）

**Week 1-2：需求確認與設計**
- [ ] 全員閱讀 Reading in the Brain
- [ ] 與曾教授對齊核心功能
- [ ] 繪製 UI/UX Wireframes
- [ ] 定義技術棧與開發環境

**Week 3：環境建置**
- [ ] GitHub 倉庫初始化
- [ ] 前後端專案架構搭建
- [ ] CI/CD Pipeline 設定
- [ ] 開發規範文件（Coding Style、PR Review）

---

### Phase 1：MVP 核心功能（3-4 個月）

#### 月份 1-2：基礎架構 + 朗讀功能

**教師端**
- [ ] 註冊、登入（Email + Google SSO）
- [ ] 建立學校、班級、學生
- [ ] 上傳課文（文字貼上，自動分段）
- [ ] 設定朗讀目標（語速、正確率）

**學生端**
- [ ] 學生登入
- [ ] 查看分配課文
- [ ] 朗讀錄音（段落練習）
- [ ] 基礎播放功能

**後端**
- [ ] 多層級資料模型（School → Class → Teacher → Student → Course）
- [ ] 語音檔案上傳與儲存
- [ ] Google STT API 整合

#### 月份 3：流暢度分析 + 即時回饋

**核心功能**
- [ ] 朗讀與原文比對（逐字分析）
- [ ] 錯誤偵測（跳字、加字、讀錯）
- [ ] 流暢度指標計算（語速、正確率）
- [ ] 六階段即時回饋頁面
  - 結果總覽
  - 錄音播放與轉錄
  - 逐句對比
  - 錯字詞清單
  - 練習建議
  - AI 分析（使用 LLM）

#### 月份 4：教師儀表板 + Beta 測試

**教師管理功能**
- [ ] 學生學習進度儀表板
- [ ] 練習紀錄查詢
- [ ] 卡點預警系統
- [ ] 通知中心

**測試與優化**
- [ ] 與曾教授合作學校進行 Beta 測試
- [ ] 收集教師與學生回饋
- [ ] 修正 Bug 與 UX 問題
- [ ] 效能優化

---

### Phase 2：進階功能（3-4 個月）

**生字學習模組**
- [ ] 字型、字音、字義展示
- [ ] 筆順動畫
- [ ] 手寫辨識（平板）
- [ ] 發音練習與評分

**蘇格拉底對話系統**
- [ ] LLM 驅動的理解力對話
- [ ] 語音輸入支援
- [ ] 對話歷史紀錄
- [ ] 理解力評估

**學習分析**
- [ ] 長期進度追蹤
- [ ] 個別化學習建議
- [ ] 家長端（查看孩子進度）

---

### Phase 3：規模化與商業化（持續）

- [ ] 多課文來源整合（康軒、南一、翰林授權洽談）
- [ ] 學習報告匯出（PDF）
- [ ] 白牌授權機制
- [ ] 多語言支援（閩南語、客語、英語）

---

## 👥 團隊分工建議

### 啟翔、張靖杭（每週 16-20 小時）

**前 3 個月分工**：
- **啟翔**：後端 API + AI 整合
  - 資料庫設計
  - RESTful API 開發
  - Google STT 整合
  - 朗讀分析演算法

- **張靖杭**：前端介面
  - 教師管理台（Next.js）
  - 學生朗讀介面（Flutter）
  - UI/UX 實作

**協作項目**：
- 共同：API 文檔撰寫、Code Review
- 每週：進度同步會議（2 小時）
- 雙週：與曾教授 Demo 與回饋（1 小時）

### 曾教授團隊角色
- **教學顧問**：驗證功能符合閱讀科學原理
- **測試協調**：安排合作學校 Beta 測試
- **內容提供**：提供教材（如《漫畫語文故事集》）

### Young（專案管理 + 技術架構）
- 技術架構設計
- 專案進度管理
- 與曾教授、團隊溝通
- Code Review 與品質把關
- DevOps 與部署

---

## 💰 成本估算（MVP 階段，4 個月）

### 開發人力
```
啟翔：4 個月 × 80 小時/月 = 320 小時
張靖杭：4 個月 × 80 小時/月 = 320 小時
時薪假設：$500-800/小時（高三實習生合理範圍）

總計：640 小時 × $650 = $416,000
```

### 雲端服務（估算）
```
AWS / GCP 基礎架構：
- EC2/Cloud Run (後端)：$50-100/月
- RDS PostgreSQL：$30-50/月
- S3/Cloud Storage (錄音檔)：$20-50/月
- Redis Cache：$20/月

AI API 成本（依使用量）：
- Google STT：$0.006/15 秒，假設 100 位學生 × 每天 10 次練習 × 30 天
  = 30,000 次 × $0.006 = $180/月
- OpenAI GPT-4o (蘇格拉底對話)：Phase 2 才需要

4 個月雲端總成本：約 $5,000-8,000
```

### 其他成本
```
- 網域 & SSL：$500/年
- 開發工具（GitHub, Vercel, etc）：$0-1,000/月
- 測試裝置（平板）：一次性 $20,000-30,000
```

### MVP 總成本估算
```
人力：$416,000
雲端：$8,000
其他：$30,000
-------------------
總計：約 $454,000
```

---

## ⚠️ 風險評估與應對

### 風險 1：開發進度落後
**機率**：中
**影響**：高

**應對**：
- 採用敏捷開發，每 2 週交付可展示功能
- 優先實作核心流程（朗讀 → 分析 → 回饋）
- 次要功能（手寫、對話）延後至 Phase 2

### 風險 2：語音識別準確度不足
**機率**：中
**影響**：高（影響核心價值）

**應對**：
- 早期測試 Google STT 中文準確度
- 準備備選方案（Azure Speech）
- 考慮使用專門的中文語音模型（如：科大訊飛）

### 風險 3：學校著作權問題
**機率**：中
**影響**：中

**應對**：
- MVP 階段使用曾教授已授權教材
- 同步洽談康軒、南一、翰林授權
- 準備替代方案（使用公共領域文本，如國語日報舊文章）

### 風險 4：使用者接受度低
**機率**：低（有「朗朗上口」驗證基礎）
**影響**：高

**應對**：
- Beta 測試階段密集收集回饋
- 快速迭代 UI/UX
- 提供教師訓練與技術支援

---

## 📈 成功指標（MVP 階段結束）

### 技術指標
- [ ] 語音識別準確率 > 90%（中文）
- [ ] 朗讀分析回應時間 < 5 秒
- [ ] 系統穩定度 > 99%（無重大故障）
- [ ] 支援 30 位學生同時使用

### 產品指標
- [ ] 合作學校數量 ≥ 2 所
- [ ] 活躍學生數 ≥ 50 位
- [ ] 教師滿意度 ≥ 4.0/5.0
- [ ] 學生朗讀改善率（正確率提升 ≥ 10%）

### 教學指標
- [ ] 曾教授認證符合閱讀科學原理
- [ ] 教師願意推薦給其他學校
- [ ] 學生持續使用率 > 70%（4 週後）

---

## 🎯 給團隊的建議

### ✅ 立即行動（本週）

1. **確認技術方案**
   - 同意「繼承概念 + 全新開發」方案
   - 確認技術棧選擇（Next.js + FastAPI/Express + PostgreSQL）
   - 核准預算與時程

2. **組織開發團隊**
   - 與啟翔、張靖杭確認時間投入（每週 16-20 小時）
   - 明確分工（前端/後端）
   - 設定溝通節奏（每週同步會議）

3. **與曾教授對齊**
   - 確認 MVP 功能範圍
   - 安排 Beta 測試學校
   - 取得已授權教材

### 📅 第一個月（環境建置 + 基礎開發）

**Week 1**
- [ ] GitHub 倉庫建立
- [ ] 前後端專案初始化
- [ ] 資料庫設計完成

**Week 2-3**
- [ ] 教師端：註冊登入功能
- [ ] 後端：School/Class/Teacher/Student 資料模型
- [ ] 部署環境設定（Staging）

**Week 4**
- [ ] 教師端：建立班級與學生
- [ ] 學生端：登入與課文列表
- [ ] 第一次 Demo（給曾教授）

### 🎯 關鍵里程碑

- **Month 2 結束**：學生可以錄音並上傳
- **Month 3 結束**：完整即時回饋系統運作
- **Month 4 結束**：Beta 測試開始
- **Month 6 結束**：正式上線（2-3 所學校）

---

## 📚 參考資源

### 技術文檔
- Next.js 官方文檔：https://nextjs.org/docs
- FastAPI 官方文檔：https://fastapi.tiangolo.com/
- Flutter 官方文檔：https://flutter.dev/docs
- Google Cloud Speech-to-Text：https://cloud.google.com/speech-to-text/docs

### 教學理論
- NotebookLM 閱讀科學資料庫：https://notebooklm.google.com/notebook/a641cf27-2195-44f9-afd4-94508fb75cd0
- 柯華葳《語言、語文與閱讀》

### 參考專案
- 朗朗上口：https://-ad028405.base44.app/
- 「朗朗上口」產品介紹：`docs/LANGLANGSHANGKOU_PRODUCT_INTRO.md`

---

**建立日期**：2026-02-12
**最後更新**：2026-02-12
**維護者**：Young Tsai

**下一步**：等待團隊確認技術方案與預算，即可開始執行 Phase 0。
