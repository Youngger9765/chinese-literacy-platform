# 開發流程建議

## 📋 目錄

1. [開發前準備](#開發前準備)
2. [教師管理介面](#教師管理介面)
3. [學生使用介面](#學生使用介面)
4. [MVP 雛形](#mvp-雛形)
5. [課文來源](#課文來源)

---

## 開發前準備

### 1. 了解 Science of Reading

#### 推薦閱讀順序
1. **第一步**：閱讀 [Reading in the Brain](https://notebooklm.google.com/notebook/a641cf27-2195-44f9-afd4-94508fb75cd0)
2. **第二步**：收聽每本書的 Podcast（NotebookLM 自動生成）
3. **第三步**：閱讀柯華葳老師的《語言、語文與閱讀》

#### 為什麼重要？
> 我們對閱讀科學有同樣理解後，就比較容易在功能取捨上有共識。

#### 取得電子書
柯華葳《語言、語文與閱讀》電子書（可用於 6 個設備）：
1. 前往 [金石堂電子書管理頁面](https://www.kingstone.com.tw/ksmember/info/ebook/#sstart_tab)
2. 下載對應裝置的 App
3. 使用提供的「通行碼」登入

---

## 教師管理介面 UI

### 1. 註冊與登入
- ✅ 單一帳號註冊、登入
- ✅ 支援 Google / Microsoft 帳號整合（SSO）

### 2. 使用同意書

教師註冊時必須同意以下條款：

#### 📝 同意事項
1. ✅ 建立的班級及學生確實與實體教學的班級及學生一致
2. ✅ 上傳的課文來自學校合法採購的教科書
3. ✅ 未使用任何未經授權的課文
4. ✅ 為避免侵犯著作權，系統將在學期結束後一週自動刪除課文文本

### 3. 學校與班級管理

#### 功能列表
- [ ] 建立學校（需驗證學校 Email 網域）
- [ ] 建立班級
- [ ] 建立學生資料
- [ ] 系統驗證教師與學生的 Email 是否屬於學校

#### 資料結構建議
```javascript
School {
  id: string
  name: string
  domain: string  // 例如：@school.edu.tw
  verified: boolean
}

Class {
  id: string
  schoolId: string
  name: string
  teacherId: string
  semester: string  // 例如：2024-1
}

Student {
  id: string
  classId: string
  name: string
  email: string  // 必須符合學校網域
  enrolledAt: Date
}
```

### 4. 學習監控儀表板

#### 顯示內容
- 📊 學生的學習進展
- ⚠️ 學生的卡點（識字困難、理解困難）
- 🔔 自動提醒：
  - 學生沒有進展超過 X 天
  - 卡點數量超過閾值
  - 朗讀錯誤率過高

#### 卡點偵測邏輯
```python
# 偵測標準
卡點 = {
    '同一生字錯誤次數 >= 3',
    '朗讀同一段落嘗試次數 >= 5',
    '理解測驗連續錯誤 >= 2',
    '停滯天數 >= 7'
}
```

### 5. 課文管理

#### 功能
- [ ] 上傳課文（支援文字貼上 / 檔案上傳）
- [ ] 自動分段（根據標點符號）
- [ ] 標註生字（自動辨識 / 手動標註）
- [ ] 設定特別教學指示（針對特定學生）

#### 課文生命週期
```
上傳課文 → 學期中使用 → 學期結束 +7 天 → 自動刪除
```

#### 著作權保護機制
- ⚠️ 警告：課文僅供班級內使用
- 🔒 防止下載、複製、分享
- 🗑️ 自動刪除機制（cron job）

---

## 學生使用介面 UI

### 1. 蘇格拉底式對話
**目的**：評估學生對意義的理解

#### 對話流程
```
系統：「這一段在說什麼？」
學生：[語音回答]
系統：「為什麼主角會這樣做？」
學生：[語音回答]
系統：「如果你是主角，你會怎麼做？」
學生：[語音回答]
```

#### 技術需求
- 🎤 語音輸入（STT: Speech-to-Text）
- 🤖 自然語言理解（NLU）
- 💬 對話管理（可考慮使用 LLM）

### 2. 朗讀訓練

#### 訓練流程
```
段落朗讀 → 偵錯 → 重讀 → 整篇朗讀 → 完成
```

#### 功能設計
- [ ] 先朗讀一段
- [ ] 逐段完成後，朗讀整篇文章
- [ ] 錄音播放功能（讓學生聽自己的朗讀）

### 3. 智能偵錯

#### 核心功能
比對學生朗讀與原文的差異：

```python
# 偵錯類型
錯誤類型 = {
    '跳字': 原文有，朗讀沒有,
    '加字': 朗讀有，原文沒有,
    '讀錯': 形近字、音近字混淆,
    '停頓過長': 識字困難指標
}
```

#### 重複錯誤處理
如果同一個字重複出現錯誤：
```
系統：「『清』這個字你讀錯了 3 次，要去學生字嗎？」
學生：[點選「去學習」]
→ 跳轉到生字學習模組
```

### 4. 生字學習

#### 學習內容
- 字型：字的長相、部件拆解
- 字音：注音符號、發音練習
- 字義：解釋、例句
- 筆順：動畫示範
- 筆畫練習：**僅在平板上提供觸控書寫**

#### 互動設計
```
1. 展示字型 + 部件解說
   例：「清 = 水 + 青」「與水有關，青是聲音」

2. 發音練習
   系統：[播放正確發音]
   學生：[跟讀]
   系統：[評分]

3. 筆順動畫
   系統：[展示筆順]
   學生：[在平板上書寫]
   系統：[辨識筆畫正確性]

4. 例句理解
   系統：「河水很清澈」
   學生：[選擇正確解釋]
```

### 5. 注音符號

#### 功能
- 可隨時開啟/關閉
- 懸浮顯示於文字上方
- 支援鍵盤快捷鍵（Space 切換）

#### 技術實現
```javascript
// 顯示邏輯
<ruby>
  <rb>清</rb>
  <rt v-if="showBopomofo">ㄑㄧㄥ</rt>
</ruby>
```

---

## MVP 雛形

### Phase 1: 核心功能（2-3 個月）

#### 教師端
- [ ] 註冊、登入
- [ ] 建立班級、學生
- [ ] 上傳課文（文字貼上）
- [ ] 查看學生朗讀紀錄

#### 學生端
- [ ] 登入
- [ ] 查看分配的課文
- [ ] 朗讀訓練（段落）
- [ ] 生字學習（字型、字音、字義）

### Phase 2: 智能化（3-4 個月）

- [ ] 蘇格拉底對話系統
- [ ] 朗讀偵錯與自動生字推薦
- [ ] 學習儀表板與預警

### Phase 3: 擴充（持續）

- [ ] 多課文來源整合
- [ ] 學習分析報告
- [ ] 家長端（查看孩子進度）

---

## 課文來源

### 1. 教科書（著作權待澄清）
- 📚 康軒、南一、翰林
- ⚠️ 需與出版社洽談授權方式
- 💡 可能方案：平台向出版社付費 / 學校已購買視為授權

### 2. 曾世杰 / 陳淑麗教材
- ✅ 已授權
- 📖 包含《漫畫語文故事集》等教材

### 3. 香港中文大學
- 🟡 評估中
- 需確認授權方式與適用性

### 4. 國語日報
- 🟡 評估中
- 60 年以上文章可能進入公共領域
- 需確認法律細節

---

## 技術建議

### 前端技術

#### 學生端（跨平台）
```
Flutter (已有基礎代碼)
- iOS / Android / Web
- 手寫辨識支援
- 語音錄製支援
```

#### 教師端（Web）
```
Next.js / React
- 快速開發
- SEO 友善
- 適合儀表板
```

### 後端技術

```
Node.js + Express / Python FastAPI
- RESTful API / GraphQL
- WebSocket (即時通知)
```

### 語音與 AI 服務

| 功能 | 技術選項 |
|------|----------|
| 語音識別 (STT) | Google Speech-to-Text / Azure Speech |
| 文字轉語音 (TTS) | Google TTS / Azure TTS |
| 蘇格拉底對話 | OpenAI GPT-4 / Claude / Gemini |
| 手寫辨識 | Google ML Kit / Azure Computer Vision |

---

## 開發檢查清單

### 開始開發前
- [ ] 全體開發者閱讀 Reading in the Brain
- [ ] 理解曾世杰教授的教學理論
- [ ] 定義清楚的 User Stories
- [ ] 繪製 UI/UX Wireframes

### 開發期間
- [ ] 遵循 WCAG 無障礙標準
- [ ] 考慮讀寫障礙學生的需求（字體大小、顏色對比）
- [ ] 定期與教育顧問（曾世杰教授團隊）確認方向

### 上線前
- [ ] 與實際學校、班級進行 Beta 測試
- [ ] 確認著作權授權完備
- [ ] 資料保護與隱私政策符合法規

---

**下一步**：開始 UI/UX 設計，繪製教師端與學生端的 Wireframes。
