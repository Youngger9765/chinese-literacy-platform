# å¤–éƒ¨ç³»çµ±æ•´åˆæ–¹æ¡ˆè¨­è¨ˆ

> è¨˜éŒ„æ—¥æœŸï¼š2026-02-13
> ææ¡ˆè€…ï¼šYoung Tsai
> ç‹€æ…‹ï¼šæ–¹æ¡ˆè©•ä¼°ä¸­ ğŸ”¬

---

## ğŸ’¡ æ ¸å¿ƒæ¦‚å¿µ

**ä¸è‡ªå·±é€ è¼ªå­ï¼Œè€Œæ˜¯æ•´åˆæˆç†Ÿçš„å¤–éƒ¨ç³»çµ±**ï¼š

| åŠŸèƒ½éœ€æ±‚ | å¤–éƒ¨ç³»çµ± | æˆ‘å€‘çš„è§’è‰² |
|---------|---------|-----------|
| **èª²ç¨‹çµæ§‹ç®¡ç†** | Notion API | è³‡æ–™åŒæ­¥ + å‰ç«¯åŒ…è£ |
| **ä½œæ¥­èˆ‡ä»»å‹™** | GitHub Issues | è³‡æ–™æ˜ å°„ + ç‹€æ…‹è¿½è¹¤ |
| **èª²ç¨‹å±¤ç´šé—œä¿‚** | GitHub Projects/Epic | éšå±¤æ˜ å°„ + è¦–è¦ºåŒ– |
| **ç­ç´šç®¡ç†** | Google Classroom API | è³‡æ–™æ©‹æ¥ + æ¬Šé™åŒæ­¥ |

**æˆ‘å€‘çš„ç³»çµ±åªéœ€è¦**ï¼š
- âœ… å‰ç«¯ï¼šæ¼‚äº®çš„ UI åŒ…è£ï¼ˆå­¸ç”Ÿ/æ•™å¸«å‹å–„ï¼‰
- âœ… å¾Œç«¯ï¼šAPI ç©¿é‡å¼•ç·š + è³‡æ–™è½‰æ›
- âœ… è³‡æ–™åº«ï¼šå„²å­˜å¤–éƒ¨ç³»çµ±çš„ ID æ˜ å°„ + å¿«å–

---

## ğŸ¯ ç³»çµ±å°æ‡‰é—œä¿‚

### 1. Notion API â†’ èª²ç¨‹å…§å®¹èˆ‡çµæ§‹

#### ç‚ºä½•é¸æ“‡ Notionï¼Ÿ

**å„ªå‹¢**ï¼š
- âœ… **éšå±¤å¼é é¢çµæ§‹**ï¼šå®Œç¾å°æ‡‰èª²ç¨‹ç¯€é»æ¨¹
- âœ… **å¼·å¤§çš„ Block ç³»çµ±**ï¼šæ”¯æ´æ–‡å­—ã€åœ–ç‰‡ã€å½±ç‰‡ã€åµŒå…¥ç­‰
- âœ… **Database åŠŸèƒ½**ï¼šå¯å»ºç«‹èª²ç¨‹åº«ã€ç”Ÿå­—åº«
- âœ… **å®˜æ–¹ API å®Œå–„**ï¼šæ”¯æ´ CRUD + è¨‚é–±æ›´æ–°
- âœ… **æ¬Šé™ç®¡ç†**ï¼šæ”¯æ´åˆ†äº«èˆ‡å”ä½œ

**å°æ‡‰é—œä¿‚**ï¼š

| æˆ‘å€‘çš„æ¦‚å¿µ | Notion æ¦‚å¿µ | èªªæ˜ |
|-----------|------------|------|
| èª²ç¨‹ç¯€é»æ¨¹ | Page Hierarchy | Notion çš„é é¢å¯ä»¥ç„¡é™å·¢ç‹€ |
| èª²ç¨‹å…§å®¹ | Page Content (Blocks) | æ”¯æ´å¯Œæ–‡æœ¬ã€å¤šåª’é«” |
| ç”Ÿå­—åº« | Database | å¯å»ºç«‹ç”Ÿå­— Database |
| èª²ç¨‹ metadata | Page Properties | å­˜é›£åº¦ã€å¹´ç´šç­‰å±¬æ€§ |

---

#### Notion èª²ç¨‹çµæ§‹ç¯„ä¾‹

```
Notion Workspace: æ•™è‚²å¹³å°èª²ç¨‹åº«
â”œâ”€ ğŸ“š å®˜æ–¹èª²ç¨‹ (Page)
â”‚   â”œâ”€ åœ‹å°ä¸€å¹´ç´š (Page)
â”‚   â”‚   â”œâ”€ å–®å…ƒä¸€ï¼šæˆ‘çš„å®¶äºº (Page)
â”‚   â”‚   â”‚   â”œâ”€ ç¬¬ä¸€èª²ï¼šæˆ‘çš„å®¶ (Page)
â”‚   â”‚   â”‚   â”‚   â”œâ”€ ğŸ“ èª²æ–‡å…§å®¹ (Block: text + image)
â”‚   â”‚   â”‚   â”‚   â”œâ”€ ğŸ¤ æœ—è®€ç¤ºç¯„ (Block: audio)
â”‚   â”‚   â”‚   â”‚   â”œâ”€ ğŸ”¤ ç”Ÿå­—è© (Database query)
â”‚   â”‚   â”‚   â”‚   â””â”€ âœï¸ ç­†é †ç·´ç¿’ (Block: embed)
â”‚   â”‚   â”‚   â””â”€ ç¬¬äºŒèª²ï¼šçˆ¸çˆ¸åª½åª½ (Page)
â”‚   â”‚   â””â”€ å–®å…ƒäºŒï¼šå­¸æ ¡ç”Ÿæ´» (Page)
â”‚   â””â”€ åœ‹å°äºŒå¹´ç´š (Page)
â”‚
â””â”€ ğŸ—‚ï¸ ç”Ÿå­—è©åº« (Database)
    â”œâ”€ Entry: æ¸… (ã„‘ã„§ã„¥, éƒ¨é¦–: æ°µ, ç­†ç•«: 11)
    â”œâ”€ Entry: æƒ… (ã„‘ã„§ã„¥ËŠ, éƒ¨é¦–: å¿„, ç­†ç•«: 11)
    â””â”€ Entry: æ™´ (ã„‘ã„§ã„¥ËŠ, éƒ¨é¦–: æ—¥, ç­†ç•«: 12)
```

---

#### Notion API æ“ä½œ

**å»ºç«‹èª²ç¨‹é é¢**ï¼š
```typescript
const notion = new Client({ auth: process.env.NOTION_TOKEN });

// å»ºç«‹èª²ç¨‹é é¢
const response = await notion.pages.create({
  parent: { page_id: parent_page_id },
  properties: {
    title: { title: [{ text: { content: "ç¬¬ä¸€èª²ï¼šæˆ‘çš„å®¶" } }] },
    é›£åº¦: { select: { name: "ç°¡å–®" } },
    å¹´ç´š: { number: 1 },
    é ä¼°æ™‚é–“: { number: 30 },
  },
  children: [
    {
      object: "block",
      type: "heading_2",
      heading_2: { rich_text: [{ text: { content: "èª²æ–‡å…§å®¹" } }] },
    },
    {
      object: "block",
      type: "paragraph",
      paragraph: { rich_text: [{ text: { content: "æˆ‘æœ‰ä¸€å€‹æº«æš–çš„å®¶..." } }] },
    },
  ],
});
```

**æŸ¥è©¢èª²ç¨‹çµæ§‹**ï¼š
```typescript
// æŸ¥è©¢é é¢çš„å­é é¢
const children = await notion.blocks.children.list({
  block_id: page_id,
});

// éè¿´æŸ¥è©¢å»ºç«‹æ¨¹ç‹€çµæ§‹
```

---

### 2. GitHub Issues â†’ ä½œæ¥­ä»»å‹™

#### ç‚ºä½•é¸æ“‡ GitHub Issuesï¼Ÿ

**å„ªå‹¢**ï¼š
- âœ… **æˆç†Ÿçš„ä»»å‹™ç®¡ç†**ï¼šç‹€æ…‹è¿½è¹¤ã€æ¨™ç±¤ã€é‡Œç¨‹ç¢‘
- âœ… **ç•™è¨€èˆ‡è¨è«–**ï¼šè€å¸«æ‰¹æ”¹å›é¥‹å¯ç”¨ Comments
- âœ… **è‡ªå‹•åŒ–å·¥ä½œæµ**ï¼šGitHub Actions è‡ªå‹•åŒ–
- âœ… **Projects è¦–è¦ºåŒ–**ï¼šçœ‹æ¿è¦–åœ–
- âœ… **å…è²»ä¸”ç©©å®š**ï¼šGitHub çš„åŸºç¤è¨­æ–½

**å°æ‡‰é—œä¿‚**ï¼š

| æˆ‘å€‘çš„æ¦‚å¿µ | GitHub æ¦‚å¿µ | èªªæ˜ |
|-----------|-------------|------|
| ä½œæ¥­ | Issue | ä¸€å€‹ Issue = ä¸€ä»½ä½œæ¥­ |
| ä½œæ¥­ç‹€æ…‹ | Issue State (open/closed) + Labels | `æœªé–‹å§‹`ã€`é€²è¡Œä¸­`ã€`å·²å®Œæˆ` |
| å­¸ç”Ÿæäº¤ | Issue Comment | å­¸ç”Ÿæäº¤çµæœä½œç‚ºè©•è«– |
| è€å¸«æ‰¹æ”¹ | Issue Comment + Reaction | è€å¸«å›è¦†æ‰¹æ”¹æ„è¦‹ |
| ä½œæ¥­æˆªæ­¢æ—¥ | Issue Milestone | ä½¿ç”¨ Milestone ç®¡ç†æˆªæ­¢ |
| ç­ç´š | GitHub Repository | ä¸€å€‹ç­ç´š = ä¸€å€‹ Repo |

---

#### GitHub ä½œæ¥­ç¯„ä¾‹

```yaml
Repository: ä¸­æ­£åœ‹å°-ä¸€å¹´ç”²ç­

Issue #1: ç¬¬ä¸€èª²æœ—è®€ç·´ç¿’
  Title: ã€ä½œæ¥­ã€‘ç¬¬ä¸€èª²æœ—è®€ç·´ç¿’
  Labels: ä½œæ¥­, æœ—è®€, é€²è¡Œä¸­
  Assignee: å°æ˜ (GitHub å¸³è™Ÿ)
  Milestone: ç¬¬ä¸€é€±ä½œæ¥­ (Due: 2026-02-20)

  Description:
    ### ä½œæ¥­èªªæ˜
    è«‹æœ—è®€èª²æ–‡ã€Œæˆ‘çš„å®¶ã€ï¼Œä¸Šå‚³éŒ„éŸ³æª”ã€‚

    ### è©•åˆ†æ¨™æº–
    - æº–ç¢ºç‡ > 90%
    - èªé€Ÿé©ä¸­

    ### æäº¤æ–¹å¼
    åœ¨ä¸‹æ–¹è©•è«–å€ä¸Šå‚³éŸ³è¨Šé€£çµ

  Comments:
    - å°æ˜: [éŸ³è¨Šé€£çµ] è€å¸«æˆ‘å®Œæˆäº†ï¼
    - ç‹è€å¸«: æœ—è®€æµæš¢ï¼Œä½†ã€Œæº«æš–ã€è·³å­—äº†ã€‚è«‹é‡è®€ä¸€æ¬¡ã€‚âœ… æº–ç¢ºç‡ 85%
    - å°æ˜: [éŸ³è¨Šé€£çµ v2] é‡æ–°éŒ„äº†ï¼
    - ç‹è€å¸«: å¾ˆå¥½ï¼é€™æ¬¡æº–ç¢ºç‡ 95%ï¼Œé€šéï¼ğŸ‰

  Status: Closed (å·²å®Œæˆ)
```

---

#### GitHub API æ“ä½œ

**å»ºç«‹ä½œæ¥­ï¼ˆIssueï¼‰**ï¼š
```typescript
const octokit = new Octokit({ auth: process.env.GITHUB_TOKEN });

const issue = await octokit.rest.issues.create({
  owner: "school-org",
  repo: "class-1a",
  title: "ã€ä½œæ¥­ã€‘ç¬¬ä¸€èª²æœ—è®€ç·´ç¿’",
  body: `
### ä½œæ¥­èªªæ˜
è«‹æœ—è®€èª²æ–‡ã€Œæˆ‘çš„å®¶ã€ï¼Œä¸Šå‚³éŒ„éŸ³æª”ã€‚

### è©•åˆ†æ¨™æº–
- æº–ç¢ºç‡ > 90%
- èªé€Ÿé©ä¸­
  `,
  labels: ["ä½œæ¥­", "æœ—è®€", "æœªé–‹å§‹"],
  assignees: ["student-xiaoming"],
  milestone: 1,  // ç¬¬ä¸€é€±ä½œæ¥­
});
```

**å­¸ç”Ÿæäº¤ä½œæ¥­ï¼ˆCommentï¼‰**ï¼š
```typescript
await octokit.rest.issues.createComment({
  owner: "school-org",
  repo: "class-1a",
  issue_number: 1,
  body: `
æˆ‘å®Œæˆäº†ï¼éŸ³è¨Šé€£çµï¼šhttps://...

cc @teacher-wang
  `,
});
```

**è€å¸«æ‰¹æ”¹ï¼ˆComment + Labelï¼‰**ï¼š
```typescript
// æ–°å¢æ‰¹æ”¹è©•è«–
await octokit.rest.issues.createComment({
  owner: "school-org",
  repo: "class-1a",
  issue_number: 1,
  body: `
æœ—è®€æµæš¢ï¼æº–ç¢ºç‡ 95%ï¼Œé€šéï¼ğŸ‰

**è©•åˆ†è©³æƒ…**ï¼š
- æº–ç¢ºç‡ï¼š95% âœ…
- èªé€Ÿï¼š85 å­—/åˆ† âœ…
- æµæš¢åº¦ï¼š88 åˆ† âœ…
  `,
});

// æ›´æ–°ç‹€æ…‹
await octokit.rest.issues.update({
  owner: "school-org",
  repo: "class-1a",
  issue_number: 1,
  labels: ["ä½œæ¥­", "æœ—è®€", "å·²å®Œæˆ"],
  state: "closed",
});
```

---

### 3. GitHub Projects / Epic â†’ èª²ç¨‹å±¤ç´šé—œä¿‚

#### ç‚ºä½•é¸æ“‡ GitHub Projectsï¼Ÿ

**å„ªå‹¢**ï¼š
- âœ… **è¦–è¦ºåŒ–çœ‹æ¿**ï¼šKanban / Table / Roadmap è¦–åœ–
- âœ… **Issue åˆ†çµ„**ï¼šå¯æŒ‰ Epic / Milestone åˆ†çµ„
- âœ… **è‡ªå‹•åŒ–**ï¼šç‹€æ…‹è‡ªå‹•æ›´æ–°
- âœ… **éšå±¤é—œä¿‚**ï¼šEpic â†’ Issue çš„çˆ¶å­é—œä¿‚

**å°æ‡‰é—œä¿‚**ï¼š

| æˆ‘å€‘çš„æ¦‚å¿µ | GitHub æ¦‚å¿µ | èªªæ˜ |
|-----------|-------------|------|
| èª²ç¨‹ | Epic (Project Item) | ä¸€å€‹ Epic = ä¸€é–€èª²ç¨‹ |
| æ¨¡çµ„ | Issue in Epic | èª²ç¨‹ä¸‹çš„æ¨¡çµ„ = Epic çš„å­ Issue |
| èª²ç¨‹é€²åº¦ | Project Board | è¦–è¦ºåŒ–èª²ç¨‹å®Œæˆåº¦ |

---

#### GitHub Project ç¯„ä¾‹

```
Project: åœ‹å°ä¸€å¹´ç´šåœ‹èªèª²ç¨‹

Epic #1: ç¬¬ä¸€èª² - æˆ‘çš„å®¶
  â”œâ”€ Issue #2: æœ—è®€ç·´ç¿’ (âœ… å·²å®Œæˆ)
  â”œâ”€ Issue #3: ç”Ÿå­—å­¸ç¿’ (ğŸ”„ é€²è¡Œä¸­)
  â””â”€ Issue #4: é–±è®€ç†è§£ (â¸ï¸ æœªé–‹å§‹)

Epic #2: ç¬¬äºŒèª² - çˆ¸çˆ¸åª½åª½
  â”œâ”€ Issue #5: æœ—è®€ç·´ç¿’ (â¸ï¸ æœªé–‹å§‹)
  â””â”€ Issue #6: ç”Ÿå­—å­¸ç¿’ (â¸ï¸ æœªé–‹å§‹)
```

---

#### GitHub Projects v2 API å¯¦ä½œ

**å»ºç«‹ Project**ï¼š
```typescript
import { graphql } from '@octokit/graphql';

const graphqlWithAuth = graphql.defaults({
  headers: {
    authorization: `token ${process.env.GITHUB_TOKEN}`,
  },
});

// å»ºç«‹ Project
const createProjectResult = await graphqlWithAuth(`
  mutation($ownerId: ID!, $title: String!) {
    createProjectV2(input: {
      ownerId: $ownerId
      title: $title
    }) {
      projectV2 {
        id
        title
        url
      }
    }
  }
`, {
  ownerId: 'org_node_id',  // GitHub Organization çš„ Node ID
  title: 'åœ‹å°ä¸€å¹´ç´šåœ‹èªèª²ç¨‹',
});

const projectId = createProjectResult.createProjectV2.projectV2.id;
```

---

**å»ºç«‹ Epicï¼ˆä½¿ç”¨ Issue + Labelï¼‰**ï¼š
```typescript
// GitHub Projects v2 æ²’æœ‰åŸç”Ÿ Epicï¼Œæˆ‘å€‘ç”¨ Issue + "epic" Label æ¨¡æ“¬

// 1. å»ºç«‹ Epic Issue
const epicIssue = await octokit.rest.issues.create({
  owner: 'school-org',
  repo: 'curriculum-repo',
  title: 'ç¬¬ä¸€èª² - æˆ‘çš„å®¶',
  body: `
## èª²ç¨‹æ¦‚è¿°
æœ¬èª²ç¨‹æ•™å­¸ç›®æ¨™...

## åŒ…å«æ¨¡çµ„
- [ ] æœ—è®€ç·´ç¿’
- [ ] ç”Ÿå­—å­¸ç¿’
- [ ] é–±è®€ç†è§£
  `,
  labels: ['epic', 'course'],
});

// 2. å°‡ Epic åŠ å…¥ Project
await graphqlWithAuth(`
  mutation($projectId: ID!, $contentId: ID!) {
    addProjectV2ItemById(input: {
      projectId: $projectId
      contentId: $contentId
    }) {
      item { id }
    }
  }
`, {
  projectId: projectId,
  contentId: epicIssue.data.node_id,
});
```

---

**å»ºç«‹å­ Issue ä¸¦é—œè¯åˆ° Epic**ï¼š
```typescript
// å»ºç«‹å­ Issueï¼ˆæ¨¡çµ„ï¼‰
const moduleIssue = await octokit.rest.issues.create({
  owner: 'school-org',
  repo: 'curriculum-repo',
  title: 'æœ—è®€ç·´ç¿’',
  body: `
## æ¨¡çµ„èªªæ˜
æœ—è®€èª²æ–‡ã€Œæˆ‘çš„å®¶ã€

## é—œè¯èª²ç¨‹
- Epic: #${epicIssue.data.number}

## è©•åˆ†æ¨™æº–
- æº–ç¢ºç‡ > 90%
- èªé€Ÿé©ä¸­
  `,
  labels: ['module', 'reading'],
});

// åœ¨ Epic Issue ä¸­åŠ å…¥å­ä»»å‹™æ¸…å–®ï¼ˆTasklistï¼‰
await octokit.rest.issues.update({
  owner: 'school-org',
  repo: 'curriculum-repo',
  issue_number: epicIssue.data.number,
  body: epicIssue.data.body + `\n- [ ] #${moduleIssue.data.number} æœ—è®€ç·´ç¿’`,
});

// å°‡æ¨¡çµ„ Issue ä¹ŸåŠ å…¥ Project
await graphqlWithAuth(`
  mutation($projectId: ID!, $contentId: ID!) {
    addProjectV2ItemById(input: {
      projectId: $projectId
      contentId: $contentId
    }) {
      item { id }
    }
  }
`, {
  projectId: projectId,
  contentId: moduleIssue.data.node_id,
});
```

---

**æŸ¥è©¢ Project çš„æ‰€æœ‰ Item**ï¼š
```typescript
const projectItems = await graphqlWithAuth(`
  query($projectId: ID!) {
    node(id: $projectId) {
      ... on ProjectV2 {
        items(first: 100) {
          nodes {
            id
            content {
              ... on Issue {
                number
                title
                state
                labels(first: 10) {
                  nodes { name }
                }
              }
            }
          }
        }
      }
    }
  }
`, {
  projectId: projectId,
});

// ç¯©é¸å‡º Epicï¼ˆæœ‰ "epic" labelï¼‰
const epics = projectItems.node.items.nodes.filter(item =>
  item.content.labels.nodes.some(label => label.name === 'epic')
);
```

---

**è¨­å®š Project è¦–åœ–**ï¼š
```typescript
// å»ºç«‹ Kanban è¦–åœ–ï¼ˆæŒ‰ç‹€æ…‹åˆ†çµ„ï¼‰
await graphqlWithAuth(`
  mutation($projectId: ID!) {
    createProjectV2View(input: {
      projectId: $projectId
      name: "èª²ç¨‹é€²åº¦çœ‹æ¿"
      layout: BOARD_LAYOUT
    }) {
      view { id }
    }
  }
`, {
  projectId: projectId,
});

// å»ºç«‹ Table è¦–åœ–ï¼ˆè¡¨æ ¼å½¢å¼ï¼‰
await graphqlWithAuth(`
  mutation($projectId: ID!) {
    createProjectV2View(input: {
      projectId: $projectId
      name: "èª²ç¨‹æ¸…å–®"
      layout: TABLE_LAYOUT
    }) {
      view { id }
    }
  }
`, {
  projectId: projectId,
});
```

---

### 4. Google Classroom API â†’ ç­ç´šç®¡ç†

#### ç‚ºä½•é¸æ“‡ Google Classroomï¼Ÿ

**å„ªå‹¢**ï¼š
- âœ… **å­¸æ ¡å·²å»£æ³›ä½¿ç”¨**ï¼šæ•™è‚²æ©Ÿæ§‹å¤šå·²éƒ¨ç½² Google Workspace
- âœ… **å­¸ç”Ÿå¸³è™Ÿç®¡ç†**ï¼šç›´æ¥åŒæ­¥å­¸ç”Ÿåå–®
- âœ… **ä½œæ¥­æ´¾ç™¼æ©Ÿåˆ¶**ï¼šå¯è§¸ç™¼é€šçŸ¥
- âœ… **æˆç¸¾ç°¿æ•´åˆ**ï¼šå¯åŒæ­¥æˆç¸¾åˆ° Google Classroom

**å°æ‡‰é—œä¿‚**ï¼š

| æˆ‘å€‘çš„æ¦‚å¿µ | Google Classroom æ¦‚å¿µ | èªªæ˜ |
|-----------|----------------------|------|
| ç­ç´š | Course | ä¸€å€‹ Course = ä¸€å€‹ç­ç´š |
| å­¸ç”Ÿåå–® | Students | ç›´æ¥åŒæ­¥ |
| ä½œæ¥­æ´¾ç™¼ | CourseWork | å¯è§¸ç™¼é€šçŸ¥ |
| æˆç¸¾ | StudentSubmission.Grade | åŒæ­¥æˆç¸¾ |

---

#### Google Classroom API æ“ä½œ

**å»ºç«‹ç­ç´š**ï¼š
```typescript
const classroom = google.classroom({ version: "v1", auth });

const course = await classroom.courses.create({
  requestBody: {
    name: "ä¸€å¹´ç”²ç­ - åœ‹èª",
    section: "2026 å­¸å¹´åº¦",
    descriptionHeading: "æœ—æœ—ä¸Šå£æ™ºæ…§å­¸ç¿’å¹³å°",
    ownerId: "teacher@school.edu.tw",
  },
});
```

**åŒæ­¥å­¸ç”Ÿåå–®**ï¼š
```typescript
// å¾ Google Classroom å–å¾—å­¸ç”Ÿåå–®
const students = await classroom.courses.students.list({
  courseId: course_id,
});

// åŒæ­¥åˆ°æˆ‘å€‘çš„è³‡æ–™åº«
for (const student of students.data.students) {
  await db.execute(
    `INSERT INTO students (google_classroom_id, name, email)
     VALUES ($1, $2, $3)
     ON CONFLICT (google_classroom_id) DO UPDATE SET
       name = EXCLUDED.name,
       email = EXCLUDED.email`,
    [student.userId, student.profile.name.fullName, student.profile.emailAddress]
  );
}
```

**æ´¾ç™¼ä½œæ¥­ä¸¦åŒæ­¥**ï¼š
```typescript
// åœ¨ Google Classroom å»ºç«‹ä½œæ¥­
const courseWork = await classroom.courses.courseWork.create({
  courseId: course_id,
  requestBody: {
    title: "ç¬¬ä¸€èª²æœ—è®€ç·´ç¿’",
    description: "è«‹è‡³æœ—æœ—ä¸Šå£å¹³å°å®Œæˆæœ—è®€ç·´ç¿’",
    workType: "ASSIGNMENT",
    state: "PUBLISHED",
    maxPoints: 100,
    dueDate: { year: 2026, month: 2, day: 20 },
  },
});

// å„²å­˜é—œè¯
await db.execute(
  `INSERT INTO assignment_external_links (assignment_id, google_classroom_work_id)
   VALUES ($1, $2)`,
  [our_assignment_id, courseWork.data.id]
);
```

**åŒæ­¥æˆç¸¾**ï¼š
```typescript
// å­¸ç”Ÿå®Œæˆä½œæ¥­å¾Œï¼ŒåŒæ­¥æˆç¸¾åˆ° Google Classroom
await classroom.courses.courseWork.studentSubmissions.patch({
  courseId: course_id,
  courseWorkId: coursework_id,
  id: submission_id,
  updateMask: "assignedGrade,draftGrade",
  requestBody: {
    assignedGrade: 95,
    draftGrade: 95,
  },
});
```

---

## ğŸ—ï¸ ç³»çµ±æ¶æ§‹è¨­è¨ˆ

### æ•´åˆæ¶æ§‹åœ–

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å‰ç«¯ (Next.js)                        â”‚
â”‚  - å­¸ç”Ÿå­¸ç¿’ä»‹é¢ï¼ˆç°¡æ½”ã€å‹å–„ï¼‰                             â”‚
â”‚  - æ•™å¸«ç®¡ç†ä»‹é¢ï¼ˆåŠŸèƒ½å®Œæ•´ï¼‰                               â”‚
â”‚  - è³‡æ–™è¦–è¦ºåŒ–ï¼ˆé€²åº¦ã€é›·é”åœ–ï¼‰                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  å¾Œç«¯ API (FastAPI)                      â”‚
â”‚  - è³‡æ–™è½‰æ›èˆ‡æ˜ å°„                                        â”‚
â”‚  - æ¬Šé™é©—è­‰èˆ‡æ§åˆ¶                                        â”‚
â”‚  - Webhook æ¥æ”¶ï¼ˆå¤–éƒ¨ç³»çµ±é€šçŸ¥ï¼‰                          â”‚
â”‚  - å¿«å–ç®¡ç†ï¼ˆRedisï¼‰                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚            â”‚            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Notion API    â”‚ GitHub  â”‚ Google          â”‚
â”‚               â”‚ API     â”‚ Classroom API   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ èª²ç¨‹å…§å®¹      â”‚ ä½œæ¥­    â”‚ ç­ç´šç®¡ç†         â”‚
â”‚ èª²ç¨‹çµæ§‹      â”‚ ä»»å‹™    â”‚ å­¸ç”Ÿåå–®         â”‚
â”‚ ç”Ÿå­—åº«        â”‚ ç‹€æ…‹    â”‚ æˆç¸¾åŒæ­¥         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                     â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           è³‡æ–™åº« (PostgreSQL)                            â”‚
â”‚  - å¤–éƒ¨ç³»çµ± ID æ˜ å°„                                      â”‚
â”‚  - å¿«å–è³‡æ–™                                              â”‚
â”‚  - å­¸ç¿’æ´»å‹•è¨˜éŒ„ï¼ˆæˆ‘å€‘çš„æ ¸å¿ƒè³‡æ–™ï¼‰                         â”‚
â”‚  - çµ±è¨ˆèˆ‡åˆ†ææ•¸æ“š                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### è³‡æ–™åº«è¨­è¨ˆï¼ˆç°¡åŒ–ç‰ˆï¼‰

**æ ¸å¿ƒåŸå‰‡**ï¼šåªå„²å­˜å¤–éƒ¨ç³»çµ±çš„ ID æ˜ å°„ + æˆ‘å€‘çš„ç¨æœ‰è³‡æ–™

```sql
-- èª²ç¨‹ç¯€é»æ˜ å°„
course_node_mappings:
  - node_id (æˆ‘å€‘çš„ ID)
  - notion_page_id (Notion Page ID)
  - organization_id (å¤šç§Ÿæˆ¶)
  - synced_at

-- ä½œæ¥­æ˜ å°„
assignment_mappings:
  - assignment_id (æˆ‘å€‘çš„ ID)
  - github_issue_number
  - github_repo
  - google_classroom_work_id (å¯é¸)
  - classroom_id
  - synced_at

-- å­¸ç”Ÿæ˜ å°„
student_mappings:
  - student_id (æˆ‘å€‘çš„ ID)
  - google_classroom_user_id
  - github_username (å¯é¸)
  - organization_id

-- å­¸ç¿’æ´»å‹•ï¼ˆæˆ‘å€‘çš„æ ¸å¿ƒè³‡æ–™ï¼‰
student_activities:
  - activity_id
  - student_id
  - assignment_id
  - course_node_id
  - activity_type (reading | vocabulary | quiz)
  - score
  - ai_feedback TEXT
  - audio_url (STT éŸ³è¨Š)
  - created_at
```

---

## ğŸ” å¤šç§Ÿæˆ¶æ•´åˆç­–ç•¥

### æ ¸å¿ƒå•é¡Œ

**å¦‚ä½•åœ¨å¤–éƒ¨ç³»çµ±å¯¦ç¾å¤šç§Ÿæˆ¶éš”é›¢ï¼Ÿ**

æˆ‘å€‘çš„å¹³å°æ”¯æ´å¤šå€‹æ©Ÿæ§‹ï¼ˆæ•™è‚²å±€ã€æ•™è‚²é›†åœ˜ã€å–®ä¸€å­¸æ ¡ï¼‰ï¼Œæ¯å€‹æ©Ÿæ§‹çš„è³‡æ–™å¿…é ˆå®Œå…¨éš”é›¢ã€‚ä½† Notionã€GitHubã€Google Classroom éƒ½æ˜¯é€šç”¨ç³»çµ±ï¼Œå¦‚ä½•å¯¦ç¾ç§Ÿæˆ¶éš”é›¢ï¼Ÿ

---

### æ–¹æ¡ˆå°æ¯”

| æ–¹æ¡ˆ | Notion | GitHub | Google Classroom | å„ªå‹¢ | åŠ£å‹¢ |
|------|--------|--------|------------------|------|------|
| **A. å…±ç”¨ç©ºé–“ + éæ¿¾** | å–®ä¸€ Workspace + org_id éæ¿¾ | å–®ä¸€ Org + repo éæ¿¾ | å–®ä¸€ Domain + éæ¿¾ | æˆæœ¬ä½ | éš”é›¢ä¸å¾¹åº• |
| **B. ç¨ç«‹ç©ºé–“** âœ… | æ¯æ©Ÿæ§‹ç¨ç«‹ Workspace | æ¯æ©Ÿæ§‹ç¨ç«‹ Organization | æ¯æ©Ÿæ§‹ç¨ç«‹ Domain | å®Œå…¨éš”é›¢ | æˆæœ¬é«˜ã€ç®¡ç†è¤‡é›œ |
| **C. æ··åˆæ–¹æ¡ˆ** | å°æ©Ÿæ§‹å…±ç”¨ï¼Œå¤§æ©Ÿæ§‹ç¨ç«‹ | åŒå·¦ | åŒå·¦ | å¹³è¡¡æˆæœ¬èˆ‡éš”é›¢ | è¤‡é›œåº¦é«˜ |

**æ¨è–¦æ–¹æ¡ˆ**ï¼š**Bï¼ˆç¨ç«‹ç©ºé–“ï¼‰** - å®Œå…¨éš”é›¢ï¼Œç¬¦åˆå¤šç§Ÿæˆ¶ SaaS å®‰å…¨è¦æ±‚

---

### 1. Notion çš„å¤šç§Ÿæˆ¶ç­–ç•¥

#### æ–¹æ¡ˆï¼šæ¯å€‹æ©Ÿæ§‹ä¸€å€‹ Notion Workspace

**å¯¦ä½œæ–¹å¼**ï¼š

```typescript
// æ©Ÿæ§‹è¨»å†Šæ™‚ï¼Œå»ºç«‹ç¨ç«‹ Notion Workspace
async function createOrganizationNotion(orgId: string, orgName: string) {
  // 1. ä½¿ç”¨ Notion API å»ºç«‹æ–° Workspaceï¼ˆéœ€ Enterprise Planï¼‰
  // æ³¨æ„ï¼šæ¨™æº– Notion API ä¸æ”¯æ´å»ºç«‹ Workspace
  // æ›¿ä»£æ–¹æ¡ˆï¼šé å…ˆå»ºç«‹å¤šå€‹ Workspaceï¼Œåˆ†é…çµ¦æ©Ÿæ§‹

  // 2. å»ºç«‹æ©Ÿæ§‹å°ˆç”¨çš„ Integration Token
  const notionToken = await createNotionIntegration(orgName);

  // 3. å„²å­˜æ˜ å°„
  await db.execute(`
    INSERT INTO organization_notion_mappings (
      organization_id,
      notion_workspace_id,
      notion_integration_token,
      created_at
    ) VALUES ($1, $2, $3, NOW())
  `, [orgId, workspaceId, encrypt(notionToken)]);

  // 4. å»ºç«‹èª²ç¨‹åº«æ ¹é é¢
  const rootPage = await notion.pages.create({
    parent: { workspace: true },
    properties: {
      title: { title: [{ text: { content: `${orgName} - èª²ç¨‹åº«` } }] },
    },
  });

  return { workspaceId, rootPageId: rootPage.id };
}
```

---

**ç§Ÿæˆ¶éš”é›¢ä¿è­‰**ï¼š
- âœ… æ¯å€‹æ©Ÿæ§‹æœ‰ç¨ç«‹ Workspace
- âœ… æ¯å€‹ Workspace æœ‰ç¨ç«‹ Integration Token
- âœ… API å‘¼å«æ™‚ä½¿ç”¨å°æ‡‰æ©Ÿæ§‹çš„ Token

**æŸ¥è©¢æ™‚çš„éš”é›¢**ï¼š
```typescript
// æ ¹æ“šæ©Ÿæ§‹ ID å–å¾—å°æ‡‰çš„ Notion Token
const notionToken = await getNotionTokenByOrgId(orgId);
const notion = new Client({ auth: notionToken });

// ä¹‹å¾Œçš„æ‰€æœ‰æ“ä½œéƒ½è‡ªå‹•éš”é›¢
const courses = await notion.databases.query({
  database_id: org_course_db_id,
});
```

---

**æˆæœ¬ä¼°ç®—**ï¼ˆNotionï¼‰ï¼š

| æ©Ÿæ§‹è¦æ¨¡ | Workspace æ•¸ | å…§å®¹å‰µå»ºè€… | Notion Plan | æœˆè²» |
|---------|-------------|-----------|-------------|------|
| å°å‹ï¼ˆ1-3 æ ¡ï¼‰ | 1 | 5-10 äºº | Plus | $100 |
| ä¸­å‹ï¼ˆ4-10 æ ¡ï¼‰ | 1 | 20-30 äºº | Business | $300 |
| å¤§å‹ï¼ˆ10+ æ ¡ï¼‰ | 1 | 50+ äºº | Enterprise | è­°åƒ¹ |

---

### 2. GitHub çš„å¤šç§Ÿæˆ¶ç­–ç•¥

#### æ–¹æ¡ˆï¼šæ¯å€‹æ©Ÿæ§‹ä¸€å€‹ GitHub Organization

**å¯¦ä½œæ–¹å¼**ï¼š

```typescript
// æ©Ÿæ§‹è¨»å†Šæ™‚ï¼Œå»ºç«‹ GitHub Organization
async function createOrganizationGitHub(orgId: string, orgName: string) {
  // 1. å»ºç«‹ GitHub Organizationï¼ˆéœ€æ‰‹å‹•æˆ–é€é GitHub Appsï¼‰
  // æ³¨æ„ï¼šæ¨™æº– GitHub API ä¸æ”¯æ´å»ºç«‹ Organization
  // æ›¿ä»£æ–¹æ¡ˆï¼šä½¿ç”¨ GitHub Apps + Organization ç®¡ç†æ¬Šé™

  const octokit = new Octokit({ auth: process.env.GITHUB_APP_TOKEN });

  // 2. ç‚ºæ©Ÿæ§‹å»ºç«‹å°ˆç”¨ Repositoryï¼ˆèª²ç¨‹åº«ï¼‰
  const curriculumRepo = await octokit.rest.repos.createInOrg({
    org: `edu-${orgName.toLowerCase()}`,
    name: 'curriculum',
    description: `${orgName} èª²ç¨‹åº«`,
    private: true,
  });

  // 3. å„²å­˜æ˜ å°„
  await db.execute(`
    INSERT INTO organization_github_mappings (
      organization_id,
      github_org_name,
      curriculum_repo,
      created_at
    ) VALUES ($1, $2, $3, NOW())
  `, [orgId, `edu-${orgName}`, 'curriculum']);

  return {
    orgName: `edu-${orgName}`,
    curriculumRepo: curriculumRepo.data.full_name,
  };
}
```

---

**ç­ç´š Repository è¨­è¨ˆ**ï¼š

```
GitHub Organization: edu-taipei-city ï¼ˆå°åŒ—å¸‚æ•™è‚²å±€ï¼‰
â”œâ”€â”€ curriculum (repo) - æ©Ÿæ§‹èª²ç¨‹åº«
â”œâ”€â”€ zhongzheng-1a (repo) - ä¸­æ­£åœ‹å°ä¸€å¹´ç”²ç­
â”œâ”€â”€ zhongzheng-1b (repo) - ä¸­æ­£åœ‹å°ä¸€å¹´ä¹™ç­
â”œâ”€â”€ xinyi-1a (repo) - ä¿¡ç¾©åœ‹å°ä¸€å¹´ç”²ç­
â””â”€â”€ ...

GitHub Organization: edu-kang-chiao ï¼ˆåº·æ©‹æ•™è‚²é›†åœ˜ï¼‰
â”œâ”€â”€ curriculum (repo) - æ©Ÿæ§‹èª²ç¨‹åº«
â”œâ”€â”€ hsinchu-1a (repo) - æ–°ç«¹æ ¡å€ä¸€å¹´ç”²ç­
â””â”€â”€ ...
```

**ç§Ÿæˆ¶éš”é›¢ä¿è­‰**ï¼š
- âœ… æ¯å€‹æ©Ÿæ§‹æœ‰ç¨ç«‹ GitHub Organization
- âœ… Organization ä¹‹é–“å®Œå…¨éš”é›¢
- âœ… ä½¿ç”¨ GitHub Teams ç®¡ç†æ¬Šé™

---

**ä½œæ¥­ Issue ç¯„ä¾‹**ï¼ˆå¸¶ç§Ÿæˆ¶è³‡è¨Šï¼‰ï¼š

```yaml
Repository: edu-taipei-city/zhongzheng-1a

Issue #1: ã€ä½œæ¥­ã€‘ç¬¬ä¸€èª²æœ—è®€ç·´ç¿’
  Labels: ä½œæ¥­, æœ—è®€
  Metadata:
    organization_id: org_taipei_city
    school_id: school_zhongzheng
    classroom_id: class_1a
```

---

**æˆæœ¬ä¼°ç®—**ï¼ˆGitHubï¼‰ï¼š

| æ©Ÿæ§‹è¦æ¨¡ | Organization æ•¸ | Private Repos | GitHub Plan | æœˆè²» |
|---------|----------------|---------------|-------------|------|
| å°å‹ï¼ˆ1-3 æ ¡ï¼‰ | 1 | 10-30 ç­ç´š | Team | $100-150 |
| ä¸­å‹ï¼ˆ4-10 æ ¡ï¼‰ | 1 | 50-100 ç­ç´š | Team | $200-400 |
| å¤§å‹ï¼ˆ10+ æ ¡ï¼‰ | 1 | 200+ ç­ç´š | Enterprise | è­°åƒ¹ |

---

### 3. Google Classroom çš„å¤šç§Ÿæˆ¶ç­–ç•¥

#### æ–¹æ¡ˆï¼šåˆ©ç”¨ Google Workspace çš„ Domain éš”é›¢

**Google Workspace æ¶æ§‹**ï¼š

```
Google Workspace: taipei-city-edu.tw ï¼ˆå°åŒ—å¸‚æ•™è‚²å±€ï¼‰
  â”œâ”€ OU: ä¸­æ­£åœ‹å°
  â”‚   â”œâ”€ Course: ä¸€å¹´ç”²ç­ - åœ‹èª
  â”‚   â””â”€ Course: ä¸€å¹´ä¹™ç­ - åœ‹èª
  â””â”€ OU: ä¿¡ç¾©åœ‹å°
      â””â”€ Course: ä¸€å¹´ç”²ç­ - åœ‹èª

Google Workspace: kangchiao.edu.tw ï¼ˆåº·æ©‹æ•™è‚²é›†åœ˜ï¼‰
  â”œâ”€ OU: æ–°ç«¹æ ¡å€
  â””â”€ OU: é’å±±æ ¡å€
```

**ç§Ÿæˆ¶éš”é›¢ä¿è­‰**ï¼š
- âœ… æ¯å€‹æ©Ÿæ§‹ä½¿ç”¨ä¸åŒ Google Workspace Domain
- âœ… Domain ä¹‹é–“å¤©ç„¶éš”é›¢ï¼ˆGoogle ä¿è­‰ï¼‰
- âœ… ä½¿ç”¨ Service Account + Domain-Wide Delegation

---

**å¯¦ä½œæ–¹å¼**ï¼š

```typescript
// æ¯å€‹æ©Ÿæ§‹é…ç½®ç¨ç«‹çš„ Service Account
async function getGoogleClassroomClient(orgId: string) {
  // 1. å–å¾—æ©Ÿæ§‹çš„ Google Workspace è¨­å®š
  const config = await db.fetchOne(`
    SELECT google_workspace_domain, service_account_key
    FROM organization_google_mappings
    WHERE organization_id = $1
  `, [orgId]);

  // 2. å»ºç«‹ Service Account Client
  const auth = new google.auth.GoogleAuth({
    credentials: JSON.parse(decrypt(config.service_account_key)),
    scopes: ['https://www.googleapis.com/auth/classroom.courses'],
  });

  // 3. ä½¿ç”¨ Domain-Wide Delegation
  const client = await auth.getClient();
  const classroom = google.classroom({ version: 'v1', auth: client });

  return classroom;
}
```

---

**åŒæ­¥å­¸ç”Ÿåå–®ï¼ˆè‡ªå‹•ç§Ÿæˆ¶éš”é›¢ï¼‰**ï¼š

```typescript
async function syncClassroomStudents(orgId: string, classroomId: string) {
  // å–å¾—æ©Ÿæ§‹å°ˆå±¬çš„ Classroom Client
  const classroom = await getGoogleClassroomClient(orgId);

  // æŸ¥è©¢å­¸ç”Ÿï¼ˆè‡ªå‹•é™åˆ¶åœ¨è©² Domainï¼‰
  const students = await classroom.courses.students.list({
    courseId: classroomId,
  });

  // åŒæ­¥åˆ°æˆ‘å€‘çš„è³‡æ–™åº«
  for (const student of students.data.students) {
    await db.execute(`
      INSERT INTO students (
        organization_id,  -- è‡ªå‹•å¸¶å…¥ç§Ÿæˆ¶ ID
        google_classroom_user_id,
        name,
        email
      ) VALUES ($1, $2, $3, $4)
      ON CONFLICT (google_classroom_user_id) DO UPDATE
      SET name = EXCLUDED.name, email = EXCLUDED.email
    `, [
      orgId,
      student.userId,
      student.profile.name.fullName,
      student.profile.emailAddress,
    ]);
  }
}
```

---

**æˆæœ¬ä¼°ç®—**ï¼ˆGoogle Workspaceï¼‰ï¼š

| æ©Ÿæ§‹è¦æ¨¡ | Domain æ•¸ | ç”¨æˆ¶æ•¸ | Google Plan | æœˆè²» |
|---------|----------|-------|-------------|------|
| å°å‹ï¼ˆ1-3 æ ¡ï¼‰ | 1 | 200-500 | Education Plus | å­¸æ ¡é€šå¸¸å·²è¨‚é–± |
| ä¸­å‹ï¼ˆ4-10 æ ¡ï¼‰ | 1 | 1000-2000 | Education Plus | åŒä¸Š |
| å¤§å‹ï¼ˆ10+ æ ¡ï¼‰ | 1 | 5000+ | Enterprise | åŒä¸Š |

**æ³¨æ„**ï¼šå¤§å¤šæ•¸å­¸æ ¡å·²è¨‚é–± Google Workspace for Educationï¼Œ**ç„¡é¡å¤–æˆæœ¬**ã€‚

---

### 4. å¤šç§Ÿæˆ¶æ•´åˆç¸½æˆæœ¬

#### æˆæœ¬åˆ†ç´šä¼°ç®—

| æ©Ÿæ§‹è¦æ¨¡ | å­¸ç”Ÿæ•¸ | Notion/æœˆ | GitHub/æœˆ | Google/æœˆ | ç¸½æˆæœ¬/æœˆ | è‡ªå»ºæˆæœ¬/æœˆ |
|---------|-------|----------|----------|-----------|-----------|------------|
| **è©¦é»** | 100 | $100 | $100 | $0 | **$200** | $500 |
| **å°å‹** | 500 | $300 | $150 | $0 | **$450** | $1,200 |
| **ä¸­å‹** | 2,000 | $900 | $400 | $0 | **$1,300** | $2,500 |
| **å¤§å‹** | 5,000 | $2,000 | $800 | $0 | **$2,800** | $5,000+ |

**çµè«–**ï¼š
- âœ… å¤–éƒ¨ç³»çµ±æˆæœ¬ç´„ç‚ºè‡ªå»ºçš„ **40-50%**
- âœ… ä½†çœä¸‹ **75-80% é–‹ç™¼æ™‚é–“**
- âœ… ç¶­è­·æˆæœ¬å¹¾ä¹ç‚ºé›¶ï¼ˆå¤–éƒ¨ç³»çµ±è² è²¬ï¼‰

---

### 5. ç§Ÿæˆ¶åˆ‡æ›æ©Ÿåˆ¶

**API å±¤ç§Ÿæˆ¶åˆ‡æ›**ï¼š

```typescript
// Middlewareï¼šè‡ªå‹•åˆ‡æ›åˆ°å°æ‡‰æ©Ÿæ§‹çš„å¤–éƒ¨ç³»çµ±
@app.middleware("http")
async function tenantSwitch(request: Request, call_next) {
  const user = request.state.user;
  const orgId = user.organization_id;

  // æ³¨å…¥æ©Ÿæ§‹å°ˆå±¬çš„å¤–éƒ¨ç³»çµ± Client
  request.state.notion = await getNotionClient(orgId);
  request.state.github = await getGitHubClient(orgId);
  request.state.classroom = await getGoogleClassroomClient(orgId);

  return await call_next(request);
}

// ä½¿ç”¨æ™‚è‡ªå‹•éš”é›¢
@app.get("/api/courses")
async function listCourses(request: Request):
  # è‡ªå‹•ä½¿ç”¨è©²æ©Ÿæ§‹çš„ Notion Client
  courses = await request.state.notion.databases.query({
    database_id: org_course_db_id,
  });

  return courses;
```

---

### 6. è³‡æ–™åº«æ˜ å°„è¡¨è¨­è¨ˆ

**å®Œæ•´æ˜ å°„è¡¨**ï¼š

```sql
-- Notion æ˜ å°„
organization_notion_mappings:
  - organization_id (PK, FK)
  - notion_workspace_id
  - notion_integration_token (encrypted)
  - root_page_id
  - course_database_id
  - created_at

-- GitHub æ˜ å°„
organization_github_mappings:
  - organization_id (PK, FK)
  - github_org_name
  - github_app_installation_id
  - curriculum_repo
  - created_at

-- Google Classroom æ˜ å°„
organization_google_mappings:
  - organization_id (PK, FK)
  - google_workspace_domain
  - service_account_key (encrypted)
  - admin_email
  - created_at

-- èª²ç¨‹ç¯€é»æ˜ å°„ï¼ˆå¸¶ç§Ÿæˆ¶ IDï¼‰
course_node_mappings:
  - node_id (æˆ‘å€‘çš„ ID)
  - organization_id (ç§Ÿæˆ¶éš”é›¢)
  - notion_page_id
  - github_issue_number (nullable)
  - synced_at

-- ä½œæ¥­æ˜ å°„ï¼ˆå¸¶ç§Ÿæˆ¶ IDï¼‰
assignment_mappings:
  - assignment_id
  - organization_id (ç§Ÿæˆ¶éš”é›¢)
  - classroom_id
  - github_repo
  - github_issue_number
  - google_classroom_work_id (nullable)
  - synced_at
```

---

### 7. å®‰å…¨èˆ‡åˆè¦

#### è³‡æ–™éš”é›¢ä¿è­‰

| å±¤ç´š | éš”é›¢æ©Ÿåˆ¶ | ä¿è­‰ç­‰ç´š |
|------|---------|---------|
| **Notion** | ç¨ç«‹ Workspace + Token | â­â­â­â­â­ |
| **GitHub** | ç¨ç«‹ Organization | â­â­â­â­â­ |
| **Google** | ç¨ç«‹ Domainï¼ˆGoogle ä¿è­‰ï¼‰ | â­â­â­â­â­ |
| **æˆ‘å€‘çš„è³‡æ–™åº«** | Row Level Security (RLS) | â­â­â­â­â­ |

**åˆè¦è¦æ±‚**ï¼š
- âœ… ç¬¦åˆ GDPRï¼ˆè³‡æ–™å®Œå…¨éš”é›¢ï¼‰
- âœ… ç¬¦åˆå°ç£å€‹è³‡æ³•ï¼ˆæ©Ÿæ§‹é–“é›¶æ´©æ¼ï¼‰
- âœ… ç¬¦åˆæ•™è‚²éƒ¨è³‡å®‰è¦ç¯„

---

## âœ… å¯è¡Œæ€§åˆ†æ

### å„ªå‹¢

#### 1. **æ¸›å°‘é–‹ç™¼å·¥ä½œé‡ï¼ˆ70-80%ï¼‰**

| åŠŸèƒ½ | è‡ªå»ºå·¥ä½œé‡ | æ•´åˆå·¥ä½œé‡ | ç¯€çœæ¯”ä¾‹ |
|------|----------|-----------|---------|
| èª²ç¨‹ç·¨è¼¯å™¨ | 3-4 é€± | 1 é€±ï¼ˆAPI æ•´åˆï¼‰ | 75% |
| ä½œæ¥­ç‹€æ…‹ç®¡ç† | 2-3 é€± | 1 é€±ï¼ˆGitHub APIï¼‰ | 66% |
| ç­ç´šå­¸ç”Ÿç®¡ç† | 2-3 é€± | 3 å¤©ï¼ˆGoogle APIï¼‰ | 85% |
| æ¬Šé™æ§åˆ¶ | 2-3 é€± | åˆ©ç”¨å¤–éƒ¨ç³»çµ± | 90% |
| **ç¸½è¨ˆ** | **9-13 é€±** | **2.5-3 é€±** | **75-80%** |

---

#### 2. **ç«™åœ¨å·¨äººè‚©è†€ä¸Š**

- âœ… **Notion çš„ç·¨è¼¯å™¨**ï¼šæ¯”æˆ‘å€‘è‡ªå·±åšå¥½ 100 å€
- âœ… **GitHub çš„ç©©å®šæ€§**ï¼š99.95% uptime
- âœ… **Google çš„åŸºç¤è¨­æ–½**ï¼šå­¸æ ¡å·²ç¶“åœ¨ç”¨

---

#### 3. **é™ä½ç¶­è­·æˆæœ¬**

- âœ… å¤–éƒ¨ç³»çµ±è‡ªå·±è™•ç†å‚™ä»½ã€å®‰å…¨ã€æ“´å±•
- âœ… æˆ‘å€‘åªéœ€ç¶­è­· API ä¸²æ¥å±¤
- âœ… Bug ä¿®å¾©ç”±å¤–éƒ¨ç³»çµ±è² è²¬

---

#### 4. **å¿«é€Ÿ MVP**

```
å‚³çµ±æ–¹å¼ï¼š6-8 å€‹æœˆ
æ•´åˆæ–¹å¼ï¼š2-3 å€‹æœˆ
ç¯€çœæ™‚é–“ï¼š4-5 å€‹æœˆ
```

---

### é¢¨éšªèˆ‡å°ç­– (Risks & Solutions)

#### 1. **å¤–éƒ¨ç³»çµ±é™åˆ¶**

**å•é¡Œ**ï¼š
- API Rate Limitï¼ˆå¦‚ GitHub: 5000 req/hrï¼‰
- åŠŸèƒ½é™åˆ¶ï¼ˆç„¡æ³•å®Œå…¨å®¢è£½åŒ–ï¼‰
- å®šåƒ¹æ¨¡å¼ï¼ˆå¯èƒ½éœ€ä»˜è²»ï¼‰

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```typescript
// å¯¦ä½œå¿«å–å±¤ + æ‰¹æ¬¡è™•ç†
const cache = new Redis();

async function getCourseFromNotion(pageId: string) {
  // å…ˆæŸ¥å¿«å–
  const cached = await cache.get(`notion:${pageId}`);
  if (cached) return JSON.parse(cached);

  // ç„¡å¿«å–æ‰å‘¼å« API
  const page = await notion.pages.retrieve({ page_id: pageId });

  // å¿«å– 10 åˆ†é˜
  await cache.setex(`notion:${pageId}`, 600, JSON.stringify(page));

  return page;
}
```

---

#### 2. **è³‡æ–™ä¸€è‡´æ€§**

**å•é¡Œ**ï¼š
- å¤–éƒ¨ç³»çµ±æ›´æ–°ï¼Œæˆ‘å€‘çš„è³‡æ–™å¯èƒ½ä¸åŒæ­¥
- Webhook å¯èƒ½æ¼å¤±

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
```python
# å¯¦ä½œ Webhook + å®šæœŸåŒæ­¥
@app.post("/webhooks/notion")
async def notion_webhook(event: NotionWebhookEvent):
    # å³æ™‚åŒæ­¥
    await sync_notion_page(event.page_id)

# æ¯å°æ™‚æª¢æŸ¥ä¸€æ¬¡
@scheduler.scheduled_job("cron", hour="*")
async def hourly_sync():
    # åŒæ­¥æœ€è¿‘ 24 å°æ™‚æ›´æ–°çš„è³‡æ–™
    await sync_recent_changes()
```

---

#### 3. **å­¸ç”Ÿé«”é©—**

**å•é¡Œ**ï¼š
- å­¸ç”Ÿéœ€è¦åœ¨å¤šå€‹å¹³å°é–“è·³è½‰ï¼Ÿ
- å­¸ç¿’æ›²ç·šï¼Ÿ

**è§£æ±ºæ–¹æ¡ˆ**ï¼š
- âœ… **å‰ç«¯å®Œå…¨åŒ…è£**ï¼šå­¸ç”Ÿåªçœ‹åˆ°æˆ‘å€‘çš„ä»‹é¢
- âœ… **å…§åµŒå¤–éƒ¨å…§å®¹**ï¼šç”¨ iframe æˆ– API å–å¾—è³‡æ–™å¾Œæ¸²æŸ“
- âœ… **SSO å–®ä¸€ç™»å…¥**ï¼šä¸€æ¬¡ç™»å…¥ï¼Œæ‰€æœ‰ç³»çµ±é€£å‹•

---

#### 4. **æˆæœ¬å•é¡Œ**

**Notion**ï¼š
- å…è²»ç‰ˆï¼šé™åˆ¶ 1000 blocks
- Plus: $10/user/month
- **é ä¼°**ï¼š50 å€‹æ•™å¸«å…§å®¹å‰µå»ºè€… = $500/month

**GitHub**ï¼š
- Free: ç„¡é™ public repos
- Team: $4/user/monthï¼ˆéœ€è¦ privateï¼‰
- **é ä¼°**ï¼š100 å€‹ç­ç´š Repo (private) = $400/month

**Google Workspace for Education**ï¼š
- å­¸æ ¡é€šå¸¸å·²è¨‚é–±ï¼Œç„¡é¡å¤–æˆæœ¬

**ç¸½è¨ˆ**ï¼š~$900-1000/month for 2000+ students
**å‚³çµ±æ–¹å¼ä¼ºæœå™¨æˆæœ¬**ï¼š~$2000-3000/month

**çµè«–**ï¼šæˆæœ¬ç›¸ç•¶ï¼Œä½†çœä¸‹å¤§é‡é–‹ç™¼èˆ‡ç¶­è­·æˆæœ¬

---

#### 5. **å» å•†é–å®š (Vendor Lock-in)**

**é¢¨éšª**ï¼š
- éåº¦ä¾è³´å¤–éƒ¨ç³»çµ±
- å¦‚æœå¤–éƒ¨ç³»çµ±æ¼²åƒ¹æˆ–é—œé–‰æœå‹™ï¼Ÿ

**ç·©è§£ç­–ç•¥**ï¼š
```sql
-- ä¿ç•™æ ¸å¿ƒè³‡æ–™åœ¨æˆ‘å€‘çš„è³‡æ–™åº«
student_activities:  -- å­¸ç¿’æ´»å‹•ï¼ˆæ ¸å¿ƒåƒ¹å€¼ï¼‰
learning_progress:   -- å­¸ç¿’é€²åº¦ï¼ˆæ ¸å¿ƒåƒ¹å€¼ï¼‰
ai_analysis:         -- AI åˆ†æçµæœï¼ˆæ ¸å¿ƒåƒ¹å€¼ï¼‰

-- å¤–éƒ¨ç³»çµ±åªæ˜¯ã€Œç·¨è¼¯å™¨ã€å’Œã€Œå®¹å™¨ã€
notion_content â†’ å¯å°å‡ºç‚º Markdown
github_issues â†’ å¯å°å‡ºç‚º JSON
google_classroom â†’ å¯å°å‡ºå­¸ç”Ÿåå–®
```

**é·ç§»è¨ˆç•«**ï¼š
- Phase 1-2: ä½¿ç”¨å¤–éƒ¨ç³»çµ±ï¼ˆå¿«é€Ÿ MVPï¼‰
- Phase 3: è©•ä¼°æ˜¯å¦éœ€è¦è‡ªå»º
- Phase 4: è‹¥éœ€è¦ï¼Œé€æ­¥é·ç§»ï¼ˆå› ç‚ºæ ¸å¿ƒè³‡æ–™éƒ½åœ¨æˆ‘å€‘æ‰‹ä¸Šï¼‰

---

## ğŸ¯ å¯¦ä½œå»ºè­°

### MVP éšæ®µï¼ˆPhase 1ï¼‰

**ç›®æ¨™**ï¼šé©—è­‰æ•´åˆæ–¹æ¡ˆå¯è¡Œæ€§

**ç¯„åœ**ï¼š
1. âœ… Notion API æ•´åˆï¼ˆèª²ç¨‹å…§å®¹ï¼‰
2. âœ… GitHub API æ•´åˆï¼ˆ1 å€‹ç­ç´šè©¦é»ï¼‰
3. âœ… Google Classroom åŒæ­¥ï¼ˆå­¸ç”Ÿåå–®ï¼‰

**æ™‚ç¨‹**ï¼š4-6 é€±

---

### æ“´å±•éšæ®µï¼ˆPhase 2ï¼‰

**ç›®æ¨™**ï¼šå®Œæ•´åŠŸèƒ½å¯¦ç¾

**ç¯„åœ**ï¼š
1. âœ… æ‰€æœ‰ç­ç´šé·ç§»åˆ° GitHub
2. âœ… Webhook å³æ™‚åŒæ­¥
3. âœ… å®Œæ•´å‰ç«¯åŒ…è£
4. âœ… AI è©•åˆ†æ•´åˆ

**æ™‚ç¨‹**ï¼š6-8 é€±

---

### å„ªåŒ–éšæ®µï¼ˆPhase 3ï¼‰

**ç›®æ¨™**ï¼šæ•ˆèƒ½èˆ‡é«”é©—å„ªåŒ–

**ç¯„åœ**ï¼š
1. âœ… å¿«å–å±¤å„ªåŒ–
2. âœ… æ‰¹æ¬¡è™•ç†
3. âœ… é›¢ç·šæ”¯æ´
4. âœ… è©•ä¼°è‡ªå»ºéƒ¨åˆ†æ¨¡çµ„

**æ™‚ç¨‹**ï¼š4-6 é€±

---

## ğŸ“Š æ–¹æ¡ˆå°æ¯”

### æ–¹æ¡ˆ Aï¼šå®Œå…¨è‡ªå»º

**å„ªå‹¢**ï¼š
- å®Œå…¨æŒæ§
- ç„¡å» å•†é–å®š

**åŠ£å‹¢**ï¼š
- é–‹ç™¼æ™‚é–“é•·ï¼ˆ6-8 å€‹æœˆï¼‰
- ç¶­è­·æˆæœ¬é«˜
- ç·¨è¼¯å™¨é«”é©—é›£ä»¥è¶…è¶Š Notion

---

### æ–¹æ¡ˆ Bï¼šå¤–éƒ¨ç³»çµ±æ•´åˆï¼ˆæœ¬æ–¹æ¡ˆï¼‰

**å„ªå‹¢**ï¼š
- å¿«é€Ÿ MVPï¼ˆ2-3 å€‹æœˆï¼‰
- ç¶­è­·æˆæœ¬ä½
- ç«™åœ¨å·¨äººè‚©è†€ä¸Š

**åŠ£å‹¢**ï¼š
- å» å•†é–å®šé¢¨éšª
- API é™åˆ¶
- éœ€æŒçºŒä»˜è²»

---

### æ–¹æ¡ˆ Cï¼šæ··åˆæ–¹æ¡ˆï¼ˆæ¨è–¦ï¼‰âœ…

**Phase 1-2**ï¼šå¤–éƒ¨ç³»çµ±æ•´åˆï¼ˆå¿«é€Ÿé©—è­‰ï¼‰
**Phase 3+**ï¼šæ ¹æ“šæ•¸æ“šæ±ºå®šæ˜¯å¦è‡ªå»º

**å„ªå‹¢**ï¼š
- å¿«é€Ÿå•Ÿå‹•
- ä¿ç•™å½ˆæ€§
- æ ¸å¿ƒè³‡æ–™æŒæ¡åœ¨æ‰‹ä¸Š

---

## ğŸš€ çµè«–èˆ‡å»ºè­°

### âœ… å¯è¡Œæ€§è©•ä¼°ï¼šé«˜åº¦å¯è¡Œ

**å»ºè­°æ¡ç”¨æ··åˆæ–¹æ¡ˆ**ï¼š

1. **çŸ­æœŸï¼ˆ0-6 å€‹æœˆï¼‰**ï¼š
   - ä½¿ç”¨ Notion + GitHub + Google Classroom
   - å¿«é€Ÿé©—è­‰å•†æ¥­æ¨¡å¼
   - ç²å–çœŸå¯¦ç”¨æˆ¶åé¥‹

2. **ä¸­æœŸï¼ˆ6-12 å€‹æœˆï¼‰**ï¼š
   - è©•ä¼°ä½¿ç”¨æ•¸æ“š
   - è­˜åˆ¥ç“¶é ¸èˆ‡ç—›é»
   - æ±ºå®šå“ªäº›æ¨¡çµ„éœ€è‡ªå»º

3. **é•·æœŸï¼ˆ12 å€‹æœˆ+ï¼‰**ï¼š
   - é€æ­¥é·ç§»æ ¸å¿ƒæ¨¡çµ„ï¼ˆå¦‚æœ‰å¿…è¦ï¼‰
   - ä¿ç•™å¤–éƒ¨ç³»çµ±ä½œç‚ºå‚™é¸
   - æ ¸å¿ƒåƒ¹å€¼ï¼ˆAI è©•åˆ†ã€å­¸ç¿’åˆ†æï¼‰å§‹çµ‚æŒæ¡åœ¨æ‰‹ä¸Š

---

### ğŸ¯ ç«‹å³è¡Œå‹•é …

1. **æŠ€è¡“é©—è­‰**ï¼ˆ1-2 é€±ï¼‰ï¼š
   - å»ºç«‹ Notion API POC
   - å»ºç«‹ GitHub API POC
   - æ¸¬è©¦ Google Classroom API

2. **åŸå‹é–‹ç™¼**ï¼ˆ3-4 é€±ï¼‰ï¼š
   - å‰ç«¯åŒ…è£ä»‹é¢
   - è³‡æ–™åŒæ­¥æ©Ÿåˆ¶
   - 1 å€‹ç­ç´š Beta æ¸¬è©¦

3. **ç”¨æˆ¶é©—è­‰**ï¼ˆ2-3 é€±ï¼‰ï¼š
   - é‚€è«‹ 1-2 å€‹ç­ç´šè©¦ç”¨
   - æ”¶é›†åé¥‹
   - èª¿æ•´æ–¹æ¡ˆ

---

## ğŸ“š ç›¸é—œæ–‡ä»¶

- [architecture/README.md](./architecture/README.md) - æ ¸å¿ƒæ¶æ§‹è¨­è¨ˆ
- [architecture/02-Schemaè¨­è¨ˆå“²å­¸.md](./architecture/02-Schemaè¨­è¨ˆå“²å­¸.md) - è³‡æ–™åº«è¨­è¨ˆ
- [features/README.md](./features/README.md) - åŠŸèƒ½éœ€æ±‚

---

**æ–‡ä»¶ç”¨é€”**ï¼š
æ­¤æ–‡ä»¶æå‡ºå‰µæ–°çš„å¤–éƒ¨ç³»çµ±æ•´åˆæ–¹æ¡ˆï¼Œè©•ä¼°ä½¿ç”¨ Notionã€GitHubã€Google Classroom ç­‰æˆç†Ÿç³»çµ±ä»£æ›¿è‡ªå»ºçš„å¯è¡Œæ€§ï¼Œä¸¦æä¾›è©³ç´°çš„æŠ€è¡“æ–¹æ¡ˆèˆ‡é¢¨éšªåˆ†æã€‚
