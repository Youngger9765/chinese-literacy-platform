# ⚠️ 潛在誤區與優化建議

> **檢查日期**: 2026-02-14
> **檢查範圍**: 所有架構文件、時程規劃、技術決策

---

## 🔴 嚴重誤區（必須修正）

### 1. Week 3-10 時程過於緊湊 ⚠️ 高風險

**現況**：
```
Week 3-4: 資料庫設計
Week 5-6: 朗讀分析核心
Week 7-8: 蘇格拉底對話
Week 9-10: 自學介面整合
```

**問題**：
- ❌ 蘇格拉底對話只給 2 週（Week 7-8）
- ❌ 這個功能包含：
  - LLM API 整合
  - Prompt Engineering（問題生成）
  - 對話狀態管理
  - 理解度評估演算法
  - 前端對話介面
- ❌ **實際需要至少 4 週**

**建議調整**：
```
Week 3-4:   資料庫設計
Week 5-7:   朗讀分析核心（+1 週，因為要處理兒童語音）
Week 8-11:  蘇格拉底對話（+2 週，複雜度高）
Week 12-13: 自學介面整合
```

**影響**：
- Demo 2 從 Week 10 延後到 Week 13
- Phase 2 需要壓縮或延後

---

### 2. LLM API 成本被低估 💰 成本風險

**現況**：
```
成本評估：
- Azure Speech SDK: $250/月 / 50 學生 ✅
- LLM API: ??? ❌ 未評估
```

**問題**：
- ❌ 蘇格拉底對話每次練習都要調用 LLM
- ❌ 假設每次對話 5 輪，每輪 500 tokens
  - 50 學生 × 每週 3 次練習 × 5 輪 × 500 tokens = 375,000 tokens/週
  - GPT-4: ~$30/月
  - Claude Opus: ~$45/月
  - **總成本**: $250 (Azure) + $45 (LLM) = **$295/月 / 50 學生**

**建議**：
1. **Phase 0 Week 2 加入 LLM 成本測試**
2. **設計對話輪數上限**（例如最多 3 輪）
3. **考慮混合策略**：
   - 簡單問題用 Rule-based
   - 複雜問題才用 LLM
4. **評估本地模型**（Llama 3.1, Qwen）降低成本

---

### 3. 兒童語音辨識準確率可能達不到 90% 🎤 技術風險

**現況**：
```
目標：Azure Speech SDK zh-TW 準確率 >90%
```

**問題**：
- ❌ Azure 主要訓練成人語音
- ❌ 5-8 歲兒童特點：
  - 發音不標準（ㄓㄔㄕ vs ㄗㄘㄙ 混淆）
  - 語速不穩定
  - 音量控制差
- ❌ **實際準確率可能只有 70-80%**

**建議**：
1. **Phase 0 Week 2 必須用真實兒童語音測試**
2. **準備 Plan B**：
   - Google Speech-to-Text（兒童模型）
   - 自訓練 Whisper fine-tune（兒童語料）
3. **降低準確率預期**：
   - 目標調整為 85%（更實際）
   - 設計「不確定」標記（讓學生重錄）

---

### 4. 課文著作權問題未解決 ⚖️ 法律風險

**現況**：
```
PRD.md 提到：
- 課文來源：教科書 - 著作權待澄清 ❌
```

**問題**：
- ❌ 這是**法律風險**，不能「待澄清」
- ❌ Week 24 上線前必須解決
- ❌ 否則可能被出版社提告

**建議**：
1. **Phase 0 Week 1 就要處理**：
   - 聯繫出版社（康軒、翰林、南一）
   - 申請教育使用授權
   - 簽訂合約
2. **備案**：
   - 使用公版課文（60 年以上）
   - 與曾教授合作自製課文
   - 國語日報授權（需付費）

---

## 🟡 中度問題（建議改善）

### 5. GitHub Actions 自動化過於理想化 🤖

**現況**：
```
Week 1:
- Issue → 自動建立分支
- Push → 自動測試
- 測試通過 → 自動合併
```

**問題**：
- ⚠️ Week 1 就要做完 CI/CD 自動化，時程太緊
- ⚠️ 自動合併有風險（可能合併有問題的程式碼）

**建議**：
```
Week 1: 手動流程 + 基礎 CI
  - Issue → 手動建立分支
  - Push → 自動測試（但不自動合併）
  - 需要 Code Review → 手動合併

Week 5: 逐步自動化
  - 測試通過 + Code Review → 半自動合併
```

---

### 6. 測試策略完全缺失 🧪

**現況**：
- ❌ 沒有提到單元測試
- ❌ 沒有提到整合測試
- ❌ 沒有提到 E2E 測試

**建議**：
```
測試策略應包含：

1. 單元測試（每週）
   - FastAPI: pytest
   - Next.js: Vitest
   - 覆蓋率 >80%

2. 整合測試（每 Phase）
   - API 整合測試
   - 資料庫整合測試

3. E2E 測試（Phase 結束前）
   - Playwright（自動化瀏覽器測試）
   - 完整使用者流程

4. 效能測試（Week 20）
   - 50 學生同時使用
   - 語音分析 < 5 秒
```

---

### 7. 資料庫設計細節缺失 🗄️

**現況**：
```sql
students (id, name, email)
lessons (id, title, content)
submissions (id, student_id, lesson_id, audio_url, accuracy, created_at)
```

**問題**：
- ⚠️ 沒有索引設計
- ⚠️ 沒有 ERD 圖
- ⚠️ 沒有查詢效能考量

**建議**：
```sql
-- 加入索引
CREATE INDEX idx_submissions_student ON submissions(student_id);
CREATE INDEX idx_submissions_lesson ON submissions(lesson_id);
CREATE INDEX idx_submissions_created ON submissions(created_at);

-- 加入約束
ALTER TABLE submissions
  ADD CONSTRAINT fk_student FOREIGN KEY (student_id) REFERENCES students(id) ON DELETE CASCADE;

-- 考慮分割表（當資料量大時）
CREATE TABLE submissions_2026_q1 PARTITION OF submissions
  FOR VALUES FROM ('2026-01-01') TO ('2026-04-01');
```

---

### 8. 8 歲兒童獨立使用的 UX 挑戰 👶

**現況**：
```
使用者故事：
我是小明（8 歲學生）
我打開平台 → 選課文 → 錄音 → 看回饋 → AI 問我問題 → 我回答
```

**問題**：
- ⚠️ 8 歲小孩能獨立操作嗎？
- ⚠️ 需要家長陪同嗎？
- ⚠️ 介面設計考慮了嗎？

**建議**：
1. **UX 設計原則**：
   - 大按鈕（手指友善）
   - 圖示 + 文字（幫助理解）
   - 語音提示（「請開始朗讀」）
   - 進度條（知道在哪個步驟）

2. **家長模式**：
   - 家長可查看孩子學習記錄
   - 家長可設定學習目標
   - 家長可收到每週報告

3. **無障礙設計**：
   - 支援平板（更適合兒童）
   - 支援觸控
   - 字體夠大（14px+）

---

### 9. 分段朗讀的邏輯不清楚 📖

**現況**：
```
分段朗讀：
- 段落 → 段落 → 整篇
```

**問題**：
- ⚠️ 每段都要蘇格拉底對話嗎？
- ⚠️ 還是整篇讀完才對話？
- ⚠️ 如果中間某段錯很多，要重錄嗎？

**建議**：
```
分段朗讀流程（清晰版）：

1. 第一段朗讀
   → AI 分析 → 顯示錯誤
   → 如果正確率 <70%，提示「要不要重錄？」
   → 繼續下一段

2. 第二段朗讀
   → 同上

3. 整篇朗讀
   → AI 分析整體表現
   → 蘇格拉底對話（只在最後）
   → 儲存學習記錄
```

---

### 10. Week 2 Demo 1 的價值不明確 🎯

**現況**：
```
Demo 1 (Week 2): 展示 Azure 語音辨識精準度
```

**問題**：
- ⚠️ 只展示技術，沒有產品感
- ⚠️ 曾教授可能看不懂技術細節

**建議**：
```
Demo 1 改為「技術驗證 + 簡單原型」：

展示內容：
1. 播放一段兒童朗讀錄音
2. 顯示 Azure 辨識結果（文字）
3. 顯示正確率（例如 87%）
4. 顯示錯誤的字（紅色標記）

結論：
- 技術可行 ✅ 或 需要切換方案 ❌
- 成本可接受 ✅ 或 需要優化 ⚠️
```

---

## 🟢 優化建議（錦上添花）

### 11. 增加「試玩模式」（Week 10）

**建議**：
```
在 MVP 3 完成後（Week 10），加入「試玩模式」：
- 不需要註冊
- 提供 3 篇範例課文
- 可以錄音、看回饋、體驗蘇格拉底對話
- 用於 Demo 2 展示
- 用於早期用戶獲取
```

---

### 12. 設計「教師預覽模式」（Week 18）

**建議**：
```
在 Phase 3 完成後（Week 18），教師可以：
- 以「學生視角」預覽課程
- 測試蘇格拉底對話的問題品質
- 調整難度設定
```

---

### 13. 增加「離線錄音」功能（Phase 2）

**建議**：
```
考慮網路不穩定的情況：
- 學生可以離線錄音
- 錄音儲存在本地
- 有網路時自動上傳分析
```

---

### 14. 設計「學習提醒」系統（Phase 4）

**建議**：
```
在 Phase 4 加入：
- Email 提醒（學生 7 天沒學習）
- 作業截止日提醒
- 學習里程碑慶祝（完成 10 篇課文）
```

---

### 15. 考慮「語音品質檢測」（Week 5）

**建議**：
```
在錄音前檢測：
- 麥克風是否正常
- 音量是否適中
- 環境噪音是否過大

避免錄音品質差導致辨識失敗
```

---

## 📊 優先級總結

| 問題 | 優先級 | 影響範圍 | 建議處理時間 |
|------|-------|---------|-------------|
| Week 3-10 時程過緊 | 🔴 P0 | 整體時程 | **立即調整** |
| LLM 成本低估 | 🔴 P0 | 成本預算 | Week 2 評估 |
| 兒童語音準確率 | 🔴 P0 | 核心功能 | Week 2 測試 |
| 課文著作權 | 🔴 P0 | 法律風險 | Week 1 處理 |
| 自動化過於理想 | 🟡 P1 | 開發效率 | Week 1-5 逐步 |
| 測試策略缺失 | 🟡 P1 | 品質保證 | 每週加入 |
| 資料庫細節缺失 | 🟡 P1 | 效能 | Week 3-4 補充 |
| UX 挑戰 | 🟡 P1 | 使用體驗 | Week 9-10 設計 |
| 分段朗讀邏輯 | 🟡 P1 | 功能邏輯 | Week 5-6 釐清 |
| Demo 1 價值 | 🟢 P2 | 展示效果 | Week 2 優化 |

---

## 🎯 修正後的建議時程

### Phase 1 調整（延長 3 週）

```
原時程：Week 3-10 (8 週)
調整後：Week 3-13 (11 週)

Week 3-4:   資料庫設計 + ERD + 索引
Week 5-7:   朗讀分析核心（處理兒童語音特殊情況）
Week 8-11:  蘇格拉底對話（含 Prompt Engineering）
Week 12-13: 自學介面整合 + UX 優化

Demo 2: Week 13（原 Week 10）
```

### Phase 2 調整（壓縮 1 週）

```
原時程：Week 11-16 (6 週)
調整後：Week 14-18 (5 週)

Week 14-15: 生字學習 + 錯誤追蹤
Week 16-17: 學習歷程視覺化
Week 18:    整合測試 + Demo 3

Demo 3: Week 18（原 Week 16）
```

### Phase 3 保持不變

```
Week 19-22: 校班師生課（原 Week 17-20）
Demo 4: Week 22（原 Week 20）
```

### Phase 4-5 保持不變

```
Week 23-24: 作業模式 + Beta 測試
Demo 5: Week 24
```

---

## 🔧 立即行動項目

### Week 1 必做（法律 + 基礎）
- [ ] 聯繫教科書出版社，處理著作權
- [ ] GitHub 倉庫建立（基礎 CI，不需全自動）
- [ ] Next.js + FastAPI 專案初始化
- [ ] Docker Compose 本地環境

### Week 2 必做（技術驗證）
- [ ] Azure Speech SDK 兒童語音測試（真實樣本）
- [ ] LLM API 成本評估（測試對話場景）
- [ ] 備案準備（Google Speech, Whisper）
- [ ] Demo 1 簡單原型（展示技術可行性）

---

**Generated with [Claude Code](https://claude.ai/code) via [Happy](https://happy.engineering)**

Co-Authored-By: Claude <noreply@anthropic.com>
Co-Authored-By: Happy <yesreply@happy.engineering>
